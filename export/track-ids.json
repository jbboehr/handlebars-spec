[
	{
		"description": "track ids",
		"it": "should not include anything without the flag",
		"template": "{{wycats is.a slave.driver}}",
		"data": {},
		"expected": "success",
		"helpers": {
			"wycats": {
				"!code": true,
				"javascript": "function (passiveVoice, noun, options) {\n        equal(options.ids, undefined);\n        equal(options.hashIds, undefined);\n\n        return 'success';\n      }",
				"php": "function($passiveVoice, $noun, $options) {\n        return 'success';\n      }"
			}
		},
		"note": "Check original spec. Needs other tests, possibly implementation dependant.",
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 28,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 28,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 26,
						"lastLine": 1,
						"type": "sexpr",
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "ID",
							"original": "wycats",
							"parts": [
								"wycats"
							],
							"string": "wycats",
							"depth": 0,
							"idName": "wycats",
							"isSimple": true,
							"stringModeValue": "wycats"
						},
						"params": [
							{
								"firstLine": 1,
								"firstColumn": 9,
								"lastColumn": 13,
								"lastLine": 1,
								"type": "ID",
								"original": "is.a",
								"parts": [
									"is",
									"a"
								],
								"string": "is.a",
								"depth": 0,
								"idName": "is.a",
								"isSimple": false,
								"stringModeValue": "is.a"
							},
							{
								"firstLine": 1,
								"firstColumn": 14,
								"lastColumn": 26,
								"lastLine": 1,
								"type": "ID",
								"original": "slave.driver",
								"parts": [
									"slave",
									"driver"
								],
								"string": "slave.driver",
								"depth": 0,
								"idName": "slave.driver",
								"isSimple": false,
								"stringModeValue": "slave.driver"
							}
						],
						"isHelper": true,
						"eligibleHelper": true
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 8,
						"lastLine": 1,
						"type": "ID",
						"original": "wycats",
						"parts": [
							"wycats"
						],
						"string": "wycats",
						"depth": 0,
						"idName": "wycats",
						"isSimple": true,
						"stringModeValue": "wycats"
					},
					"params": [
						{
							"firstLine": 1,
							"firstColumn": 9,
							"lastColumn": 13,
							"lastLine": 1,
							"type": "ID",
							"original": "is.a",
							"parts": [
								"is",
								"a"
							],
							"string": "is.a",
							"depth": 0,
							"idName": "is.a",
							"isSimple": false,
							"stringModeValue": "is.a"
						},
						{
							"firstLine": 1,
							"firstColumn": 14,
							"lastColumn": 26,
							"lastLine": 1,
							"type": "ID",
							"original": "slave.driver",
							"parts": [
								"slave",
								"driver"
							],
							"string": "slave.driver",
							"depth": 0,
							"idName": "slave.driver",
							"isSimple": false,
							"stringModeValue": "slave.driver"
						}
					],
					"eligibleHelper": true,
					"isHelper": true
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"is",
							"a"
						],
						null,
						null
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"slave",
							"driver"
						],
						null,
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"wycats"
						],
						true,
						null
					]
				},
				{
					"opcode": "invokeHelper",
					"args": [
						2,
						"wycats",
						true
					]
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"isSimple": true
		}
	},
	{
		"description": "track ids",
		"it": "should include argument ids",
		"template": "{{wycats is.a slave.driver}}",
		"data": {
			"is": {
				"a": "foo"
			},
			"slave": {
				"driver": "bar"
			}
		},
		"expected": "HELP ME MY BOSS is.a:foo slave.driver:bar",
		"compileOptions": {
			"trackIds": true,
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"wycats": {
				"!code": true,
				"javascript": "function (passiveVoice, noun, options) {\n        equal(options.ids[0], 'is.a');\n        equal(options.ids[1], 'slave.driver');\n\n        return \"HELP ME MY BOSS \" + options.ids[0] + ':' + passiveVoice + ' ' + options.ids[1] + ':' + noun;\n      }",
				"php": "function($passiveVoice, $noun, $options) {\n        return \"HELP ME MY BOSS \" . $options['ids'][0] . ':' . $passiveVoice . ' ' . $options['ids'][1] . ':' . $noun;\n      }"
			}
		},
		"note": "Check original spec. Needs other tests, possibly implementation dependant.",
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 28,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 28,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 26,
						"lastLine": 1,
						"type": "sexpr",
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "ID",
							"original": "wycats",
							"parts": [
								"wycats"
							],
							"string": "wycats",
							"depth": 0,
							"idName": "wycats",
							"isSimple": true,
							"stringModeValue": "wycats"
						},
						"params": [
							{
								"firstLine": 1,
								"firstColumn": 9,
								"lastColumn": 13,
								"lastLine": 1,
								"type": "ID",
								"original": "is.a",
								"parts": [
									"is",
									"a"
								],
								"string": "is.a",
								"depth": 0,
								"idName": "is.a",
								"isSimple": false,
								"stringModeValue": "is.a"
							},
							{
								"firstLine": 1,
								"firstColumn": 14,
								"lastColumn": 26,
								"lastLine": 1,
								"type": "ID",
								"original": "slave.driver",
								"parts": [
									"slave",
									"driver"
								],
								"string": "slave.driver",
								"depth": 0,
								"idName": "slave.driver",
								"isSimple": false,
								"stringModeValue": "slave.driver"
							}
						],
						"isHelper": true,
						"eligibleHelper": true
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 8,
						"lastLine": 1,
						"type": "ID",
						"original": "wycats",
						"parts": [
							"wycats"
						],
						"string": "wycats",
						"depth": 0,
						"idName": "wycats",
						"isSimple": true,
						"stringModeValue": "wycats"
					},
					"params": [
						{
							"firstLine": 1,
							"firstColumn": 9,
							"lastColumn": 13,
							"lastLine": 1,
							"type": "ID",
							"original": "is.a",
							"parts": [
								"is",
								"a"
							],
							"string": "is.a",
							"depth": 0,
							"idName": "is.a",
							"isSimple": false,
							"stringModeValue": "is.a"
						},
						{
							"firstLine": 1,
							"firstColumn": 14,
							"lastColumn": 26,
							"lastLine": 1,
							"type": "ID",
							"original": "slave.driver",
							"parts": [
								"slave",
								"driver"
							],
							"string": "slave.driver",
							"depth": 0,
							"idName": "slave.driver",
							"isSimple": false,
							"stringModeValue": "slave.driver"
						}
					],
					"eligibleHelper": true,
					"isHelper": true
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "pushId",
					"args": [
						"ID",
						"is.a"
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"is",
							"a"
						],
						null,
						null
					]
				},
				{
					"opcode": "pushId",
					"args": [
						"ID",
						"slave.driver"
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"slave",
							"driver"
						],
						null,
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"wycats"
						],
						true,
						null
					]
				},
				{
					"opcode": "invokeHelper",
					"args": [
						2,
						"wycats",
						true
					]
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"trackIds": true,
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"trackIds": true,
			"isSimple": true
		}
	},
	{
		"description": "track ids",
		"it": "should include hash ids",
		"template": "{{wycats bat=is.a baz=slave.driver}}",
		"data": {
			"is": {
				"a": "foo"
			},
			"slave": {
				"driver": "bar"
			}
		},
		"expected": "HELP ME MY BOSS is.a:foo slave.driver:bar",
		"compileOptions": {
			"trackIds": true,
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"wycats": {
				"!code": true,
				"javascript": "function (options) {\n        equal(options.hashIds.bat, 'is.a');\n        equal(options.hashIds.baz, 'slave.driver');\n\n        return \"HELP ME MY BOSS \" + options.hashIds.bat + ':' + options.hash.bat + ' ' + options.hashIds.baz + ':' + options.hash.baz;\n      }",
				"php": "function($options) {\n        return \"HELP ME MY BOSS \" . $options['hashIds']['bat'] . ':' . $options['hash']['bat'] . ' ' . $options['hashIds']['baz'] . ':' . $options['hash']['baz'];\n      }"
			}
		},
		"note": "Check original spec. Needs other tests, possibly implementation dependant.",
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 36,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 36,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 34,
						"lastLine": 1,
						"type": "sexpr",
						"hash": {
							"firstLine": 1,
							"firstColumn": 9,
							"lastColumn": 34,
							"lastLine": 1,
							"type": "hash",
							"pairs": [
								[
									"bat",
									{
										"firstLine": 1,
										"firstColumn": 13,
										"lastColumn": 17,
										"lastLine": 1,
										"type": "ID",
										"original": "is.a",
										"parts": [
											"is",
											"a"
										],
										"string": "is.a",
										"depth": 0,
										"idName": "is.a",
										"isSimple": false,
										"stringModeValue": "is.a"
									}
								],
								[
									"baz",
									{
										"firstLine": 1,
										"firstColumn": 22,
										"lastColumn": 34,
										"lastLine": 1,
										"type": "ID",
										"original": "slave.driver",
										"parts": [
											"slave",
											"driver"
										],
										"string": "slave.driver",
										"depth": 0,
										"idName": "slave.driver",
										"isSimple": false,
										"stringModeValue": "slave.driver"
									}
								]
							]
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "ID",
							"original": "wycats",
							"parts": [
								"wycats"
							],
							"string": "wycats",
							"depth": 0,
							"idName": "wycats",
							"isSimple": true,
							"stringModeValue": "wycats"
						},
						"params": [],
						"isHelper": true,
						"eligibleHelper": true
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 8,
						"lastLine": 1,
						"type": "ID",
						"original": "wycats",
						"parts": [
							"wycats"
						],
						"string": "wycats",
						"depth": 0,
						"idName": "wycats",
						"isSimple": true,
						"stringModeValue": "wycats"
					},
					"params": [],
					"hash": {
						"firstLine": 1,
						"firstColumn": 9,
						"lastColumn": 34,
						"lastLine": 1,
						"type": "hash",
						"pairs": [
							[
								"bat",
								{
									"firstLine": 1,
									"firstColumn": 13,
									"lastColumn": 17,
									"lastLine": 1,
									"type": "ID",
									"original": "is.a",
									"parts": [
										"is",
										"a"
									],
									"string": "is.a",
									"depth": 0,
									"idName": "is.a",
									"isSimple": false,
									"stringModeValue": "is.a"
								}
							],
							[
								"baz",
								{
									"firstLine": 1,
									"firstColumn": 22,
									"lastColumn": 34,
									"lastLine": 1,
									"type": "ID",
									"original": "slave.driver",
									"parts": [
										"slave",
										"driver"
									],
									"string": "slave.driver",
									"depth": 0,
									"idName": "slave.driver",
									"isSimple": false,
									"stringModeValue": "slave.driver"
								}
							]
						]
					},
					"eligibleHelper": true,
					"isHelper": true
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushHash",
					"args": []
				},
				{
					"opcode": "pushId",
					"args": [
						"ID",
						"is.a"
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"is",
							"a"
						],
						null,
						null
					]
				},
				{
					"opcode": "pushId",
					"args": [
						"ID",
						"slave.driver"
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"slave",
							"driver"
						],
						null,
						null
					]
				},
				{
					"opcode": "assignToHash",
					"args": [
						"baz"
					]
				},
				{
					"opcode": "assignToHash",
					"args": [
						"bat"
					]
				},
				{
					"opcode": "popHash",
					"args": []
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"wycats"
						],
						true,
						null
					]
				},
				{
					"opcode": "invokeHelper",
					"args": [
						0,
						"wycats",
						true
					]
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"trackIds": true,
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"trackIds": true,
			"isSimple": true
		}
	},
	{
		"description": "track ids",
		"it": "should note ../ and ./ references",
		"template": "{{wycats ./is.a ../slave.driver}}",
		"data": {
			"is": {
				"a": "foo"
			},
			"slave": {
				"driver": "bar"
			}
		},
		"expected": "HELP ME MY BOSS is.a:foo ../slave.driver:undefined",
		"compileOptions": {
			"trackIds": true,
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"wycats": {
				"!code": true,
				"javascript": "function (passiveVoice, noun, options) {\n        equal(options.ids[0], 'is.a');\n        equal(options.ids[1], '../slave.driver');\n\n        return \"HELP ME MY BOSS \" + options.ids[0] + ':' + passiveVoice + ' ' + options.ids[1] + ':' + noun;\n      }",
				"php": "function($passiveVoice, $noun, $options) {\n        return \"HELP ME MY BOSS \" . $options['ids'][0] . ':' . $passiveVoice . ' ' . $options['ids'][1] . ':' . ($noun === null ? 'undefined' : $noun);\n      }"
			}
		},
		"note": "Check original spec. Needs other tests, possibly implementation dependant.",
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 33,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 33,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 31,
						"lastLine": 1,
						"type": "sexpr",
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "ID",
							"original": "wycats",
							"parts": [
								"wycats"
							],
							"string": "wycats",
							"depth": 0,
							"idName": "wycats",
							"isSimple": true,
							"stringModeValue": "wycats"
						},
						"params": [
							{
								"firstLine": 1,
								"firstColumn": 9,
								"lastColumn": 15,
								"lastLine": 1,
								"type": "ID",
								"isScoped": true,
								"original": "./is.a",
								"parts": [
									"is",
									"a"
								],
								"string": "is.a",
								"depth": 0,
								"idName": "is.a",
								"isSimple": false,
								"stringModeValue": "is.a"
							},
							{
								"firstLine": 1,
								"firstColumn": 16,
								"lastColumn": 31,
								"lastLine": 1,
								"type": "ID",
								"original": "../slave.driver",
								"parts": [
									"slave",
									"driver"
								],
								"string": "slave.driver",
								"depth": 1,
								"idName": "../slave.driver",
								"isSimple": false,
								"stringModeValue": "slave.driver"
							}
						],
						"isHelper": true,
						"eligibleHelper": true
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 8,
						"lastLine": 1,
						"type": "ID",
						"original": "wycats",
						"parts": [
							"wycats"
						],
						"string": "wycats",
						"depth": 0,
						"idName": "wycats",
						"isSimple": true,
						"stringModeValue": "wycats"
					},
					"params": [
						{
							"firstLine": 1,
							"firstColumn": 9,
							"lastColumn": 15,
							"lastLine": 1,
							"type": "ID",
							"isScoped": true,
							"original": "./is.a",
							"parts": [
								"is",
								"a"
							],
							"string": "is.a",
							"depth": 0,
							"idName": "is.a",
							"isSimple": false,
							"stringModeValue": "is.a"
						},
						{
							"firstLine": 1,
							"firstColumn": 16,
							"lastColumn": 31,
							"lastLine": 1,
							"type": "ID",
							"original": "../slave.driver",
							"parts": [
								"slave",
								"driver"
							],
							"string": "slave.driver",
							"depth": 1,
							"idName": "../slave.driver",
							"isSimple": false,
							"stringModeValue": "slave.driver"
						}
					],
					"eligibleHelper": true,
					"isHelper": true
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "pushId",
					"args": [
						"ID",
						"is.a"
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"is",
							"a"
						],
						null,
						true
					]
				},
				{
					"opcode": "pushId",
					"args": [
						"ID",
						"../slave.driver"
					]
				},
				{
					"opcode": "getContext",
					"args": [
						1
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"slave",
							"driver"
						],
						null,
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"wycats"
						],
						true,
						null
					]
				},
				{
					"opcode": "invokeHelper",
					"args": [
						2,
						"wycats",
						true
					]
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"1": true,
				"list": [
					1
				]
			},
			"options": {
				"trackIds": true,
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"trackIds": true,
			"isSimple": true
		}
	},
	{
		"description": "track ids",
		"it": "should note @data references",
		"template": "{{wycats @is.a @slave.driver}}",
		"data": {
			"is": {
				"a": "foo"
			},
			"slave": {
				"driver": "bar"
			}
		},
		"expected": "HELP ME MY BOSS @is.a:foo @slave.driver:bar",
		"options": {},
		"compileOptions": {
			"trackIds": true,
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"wycats": {
				"!code": true,
				"javascript": "function (passiveVoice, noun, options) {\n        equal(options.ids[0], '@is.a');\n        equal(options.ids[1], '@slave.driver');\n\n        return \"HELP ME MY BOSS \" + options.ids[0] + ':' + passiveVoice + ' ' + options.ids[1] + ':' + noun;\n      }",
				"php": "function($passiveVoice, $noun, $options) {\n        return \"HELP ME MY BOSS \" . $options['ids'][0] . ':' . $passiveVoice . ' ' . $options['ids'][1] . ':' . $noun;\n      }"
			}
		},
		"note": "Check original spec. Needs other tests, possibly implementation dependant.",
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 30,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 30,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 28,
						"lastLine": 1,
						"type": "sexpr",
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "ID",
							"original": "wycats",
							"parts": [
								"wycats"
							],
							"string": "wycats",
							"depth": 0,
							"idName": "wycats",
							"isSimple": true,
							"stringModeValue": "wycats"
						},
						"params": [
							{
								"firstLine": 1,
								"firstColumn": 9,
								"lastColumn": 14,
								"lastLine": 1,
								"type": "DATA",
								"id": {
									"firstLine": 1,
									"firstColumn": 10,
									"lastColumn": 14,
									"lastLine": 1,
									"type": "ID",
									"original": "is.a",
									"parts": [
										"is",
										"a"
									],
									"string": "is.a",
									"depth": 0,
									"idName": "is.a",
									"isSimple": false,
									"stringModeValue": "is.a"
								},
								"stringModeValue": "is.a",
								"idName": "@is.a"
							},
							{
								"firstLine": 1,
								"firstColumn": 15,
								"lastColumn": 28,
								"lastLine": 1,
								"type": "DATA",
								"id": {
									"firstLine": 1,
									"firstColumn": 16,
									"lastColumn": 28,
									"lastLine": 1,
									"type": "ID",
									"original": "slave.driver",
									"parts": [
										"slave",
										"driver"
									],
									"string": "slave.driver",
									"depth": 0,
									"idName": "slave.driver",
									"isSimple": false,
									"stringModeValue": "slave.driver"
								},
								"stringModeValue": "slave.driver",
								"idName": "@slave.driver"
							}
						],
						"isHelper": true,
						"eligibleHelper": true
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 8,
						"lastLine": 1,
						"type": "ID",
						"original": "wycats",
						"parts": [
							"wycats"
						],
						"string": "wycats",
						"depth": 0,
						"idName": "wycats",
						"isSimple": true,
						"stringModeValue": "wycats"
					},
					"params": [
						{
							"firstLine": 1,
							"firstColumn": 9,
							"lastColumn": 14,
							"lastLine": 1,
							"type": "DATA",
							"id": {
								"firstLine": 1,
								"firstColumn": 10,
								"lastColumn": 14,
								"lastLine": 1,
								"type": "ID",
								"original": "is.a",
								"parts": [
									"is",
									"a"
								],
								"string": "is.a",
								"depth": 0,
								"idName": "is.a",
								"isSimple": false,
								"stringModeValue": "is.a"
							},
							"stringModeValue": "is.a",
							"idName": "@is.a"
						},
						{
							"firstLine": 1,
							"firstColumn": 15,
							"lastColumn": 28,
							"lastLine": 1,
							"type": "DATA",
							"id": {
								"firstLine": 1,
								"firstColumn": 16,
								"lastColumn": 28,
								"lastLine": 1,
								"type": "ID",
								"original": "slave.driver",
								"parts": [
									"slave",
									"driver"
								],
								"string": "slave.driver",
								"depth": 0,
								"idName": "slave.driver",
								"isSimple": false,
								"stringModeValue": "slave.driver"
							},
							"stringModeValue": "slave.driver",
							"idName": "@slave.driver"
						}
					],
					"eligibleHelper": true,
					"isHelper": true
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "pushId",
					"args": [
						"DATA",
						"@is.a"
					]
				},
				{
					"opcode": "lookupData",
					"args": [
						0,
						[
							"is",
							"a"
						]
					]
				},
				{
					"opcode": "pushId",
					"args": [
						"DATA",
						"@slave.driver"
					]
				},
				{
					"opcode": "lookupData",
					"args": [
						0,
						[
							"slave",
							"driver"
						]
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"wycats"
						],
						true,
						null
					]
				},
				{
					"opcode": "invokeHelper",
					"args": [
						2,
						"wycats",
						true
					]
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"trackIds": true,
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"trackIds": true,
			"isSimple": true
		}
	},
	{
		"description": "track ids",
		"it": "should return null for constants",
		"template": "{{wycats 1 \"foo\" key=false}}",
		"data": {
			"is": {
				"a": "foo"
			},
			"slave": {
				"driver": "bar"
			}
		},
		"expected": "HELP ME MY BOSS 1 foo false",
		"compileOptions": {
			"trackIds": true,
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"wycats": {
				"!code": true,
				"javascript": "function (passiveVoice, noun, options) {\n        equal(options.ids[0], null);\n        equal(options.ids[1], null);\n        equal(options.hashIds.key, null);\n\n        return \"HELP ME MY BOSS \" + passiveVoice + ' ' + noun + ' ' + options.hash.key;\n      }",
				"php": "function($passiveVoice, $noun, $options) {\n        return \"HELP ME MY BOSS \" . $passiveVoice . ' ' . $noun . ' ' . ($options['hash']['key'] === false ? 'false' : $options['hash']['key']);\n      }"
			}
		},
		"note": "Check original spec. Needs other tests, possibly implementation dependant.",
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 28,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 28,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 26,
						"lastLine": 1,
						"type": "sexpr",
						"hash": {
							"firstLine": 1,
							"firstColumn": 17,
							"lastColumn": 26,
							"lastLine": 1,
							"type": "hash",
							"pairs": [
								[
									"key",
									{
										"firstLine": 1,
										"firstColumn": 21,
										"lastColumn": 26,
										"lastLine": 1,
										"type": "BOOLEAN",
										"bool": "false",
										"stringModeValue": false
									}
								]
							]
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "ID",
							"original": "wycats",
							"parts": [
								"wycats"
							],
							"string": "wycats",
							"depth": 0,
							"idName": "wycats",
							"isSimple": true,
							"stringModeValue": "wycats"
						},
						"params": [
							{
								"firstLine": 1,
								"firstColumn": 9,
								"lastColumn": 10,
								"lastLine": 1,
								"type": "NUMBER",
								"number": "1",
								"original": "1",
								"stringModeValue": 1
							},
							{
								"firstLine": 1,
								"firstColumn": 11,
								"lastColumn": 16,
								"lastLine": 1,
								"type": "STRING",
								"stringModeValue": "foo",
								"string": "foo",
								"original": "foo"
							}
						],
						"isHelper": true,
						"eligibleHelper": true
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 8,
						"lastLine": 1,
						"type": "ID",
						"original": "wycats",
						"parts": [
							"wycats"
						],
						"string": "wycats",
						"depth": 0,
						"idName": "wycats",
						"isSimple": true,
						"stringModeValue": "wycats"
					},
					"params": [
						{
							"firstLine": 1,
							"firstColumn": 9,
							"lastColumn": 10,
							"lastLine": 1,
							"type": "NUMBER",
							"number": "1",
							"original": "1",
							"stringModeValue": 1
						},
						{
							"firstLine": 1,
							"firstColumn": 11,
							"lastColumn": 16,
							"lastLine": 1,
							"type": "STRING",
							"stringModeValue": "foo",
							"string": "foo",
							"original": "foo"
						}
					],
					"hash": {
						"firstLine": 1,
						"firstColumn": 17,
						"lastColumn": 26,
						"lastLine": 1,
						"type": "hash",
						"pairs": [
							[
								"key",
								{
									"firstLine": 1,
									"firstColumn": 21,
									"lastColumn": 26,
									"lastLine": 1,
									"type": "BOOLEAN",
									"bool": "false",
									"stringModeValue": false
								}
							]
						]
					},
					"eligibleHelper": true,
					"isHelper": true
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "pushId",
					"args": [
						"NUMBER",
						1
					]
				},
				{
					"opcode": "pushLiteral",
					"args": [
						"1"
					]
				},
				{
					"opcode": "pushId",
					"args": [
						"STRING",
						"foo"
					]
				},
				{
					"opcode": "pushString",
					"args": [
						"foo"
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushHash",
					"args": []
				},
				{
					"opcode": "pushId",
					"args": [
						"BOOLEAN",
						false
					]
				},
				{
					"opcode": "pushLiteral",
					"args": [
						"false"
					]
				},
				{
					"opcode": "assignToHash",
					"args": [
						"key"
					]
				},
				{
					"opcode": "popHash",
					"args": []
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"wycats"
						],
						true,
						null
					]
				},
				{
					"opcode": "invokeHelper",
					"args": [
						2,
						"wycats",
						true
					]
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"trackIds": true,
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"trackIds": true,
			"isSimple": true
		}
	},
	{
		"description": "track ids",
		"it": "should return true for subexpressions",
		"template": "{{wycats (sub)}}",
		"data": {
			"is": {
				"a": "foo"
			},
			"slave": {
				"driver": "bar"
			}
		},
		"expected": "HELP ME MY BOSS 1",
		"compileOptions": {
			"trackIds": true,
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"sub": {
				"!code": true,
				"javascript": "function () { return 1; }",
				"php": "function() { return 1; }"
			},
			"wycats": {
				"!code": true,
				"javascript": "function (passiveVoice, options) {\n        equal(options.ids[0], true);\n\n        return \"HELP ME MY BOSS \" + passiveVoice;\n      }",
				"php": "function($passiveVoice, $options) {\n        return \"HELP ME MY BOSS \" . $passiveVoice;\n      }"
			}
		},
		"note": "Check original spec. Needs other tests, possibly implementation dependant.",
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 16,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 16,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 14,
						"lastLine": 1,
						"type": "sexpr",
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "ID",
							"original": "wycats",
							"parts": [
								"wycats"
							],
							"string": "wycats",
							"depth": 0,
							"idName": "wycats",
							"isSimple": true,
							"stringModeValue": "wycats"
						},
						"params": [
							{
								"firstLine": 1,
								"firstColumn": 10,
								"lastColumn": 13,
								"lastLine": 1,
								"type": "sexpr",
								"id": {
									"firstLine": 1,
									"firstColumn": 10,
									"lastColumn": 13,
									"lastLine": 1,
									"type": "ID",
									"original": "sub",
									"parts": [
										"sub"
									],
									"string": "sub",
									"depth": 0,
									"idName": "sub",
									"isSimple": true,
									"stringModeValue": "sub"
								},
								"params": [],
								"isHelper": true,
								"eligibleHelper": true
							}
						],
						"isHelper": true,
						"eligibleHelper": true
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 8,
						"lastLine": 1,
						"type": "ID",
						"original": "wycats",
						"parts": [
							"wycats"
						],
						"string": "wycats",
						"depth": 0,
						"idName": "wycats",
						"isSimple": true,
						"stringModeValue": "wycats"
					},
					"params": [
						{
							"firstLine": 1,
							"firstColumn": 10,
							"lastColumn": 13,
							"lastLine": 1,
							"type": "sexpr",
							"id": {
								"firstLine": 1,
								"firstColumn": 10,
								"lastColumn": 13,
								"lastLine": 1,
								"type": "ID",
								"original": "sub",
								"parts": [
									"sub"
								],
								"string": "sub",
								"depth": 0,
								"idName": "sub",
								"isSimple": true,
								"stringModeValue": "sub"
							},
							"params": [],
							"isHelper": true,
							"eligibleHelper": true
						}
					],
					"eligibleHelper": true,
					"isHelper": true
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "pushId",
					"args": [
						"sexpr",
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"sub"
						],
						true,
						null
					]
				},
				{
					"opcode": "invokeHelper",
					"args": [
						0,
						"sub",
						true
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"wycats"
						],
						true,
						null
					]
				},
				{
					"opcode": "invokeHelper",
					"args": [
						1,
						"wycats",
						true
					]
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"trackIds": true,
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"trackIds": true,
			"isSimple": true
		}
	},
	{
		"description": "#each",
		"it": "should track contextPath for arrays",
		"template": "{{#each array}}{{wycats name}}{{/each}}",
		"data": {
			"array": [
				{
					"name": "foo"
				},
				{
					"name": "bar"
				}
			]
		},
		"expected": "foo:array.0\nbar:array.1\n",
		"compileOptions": {
			"trackIds": true,
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"wycats": {
				"!code": true,
				"javascript": "function (name, options) {\n        return name + ':' + options.data.contextPath + '\\n';\n      }",
				"php": "function($name, $options) {\n        return $name . ':' . $options['data']['contextPath'] . \"\\n\";\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 39,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 39,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 15,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 13,
							"lastLine": 1,
							"type": "sexpr",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 7,
								"lastLine": 1,
								"type": "ID",
								"original": "each",
								"parts": [
									"each"
								],
								"string": "each",
								"depth": 0,
								"idName": "each",
								"isSimple": true,
								"stringModeValue": "each"
							},
							"params": [
								{
									"firstLine": 1,
									"firstColumn": 8,
									"lastColumn": 13,
									"lastLine": 1,
									"type": "ID",
									"original": "array",
									"parts": [
										"array"
									],
									"string": "array",
									"depth": 0,
									"idName": "array",
									"isSimple": true,
									"stringModeValue": "array"
								}
							],
							"isHelper": true,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 7,
							"lastLine": 1,
							"type": "ID",
							"original": "each",
							"parts": [
								"each"
							],
							"string": "each",
							"depth": 0,
							"idName": "each",
							"isSimple": true,
							"stringModeValue": "each"
						},
						"params": [
							{
								"firstLine": 1,
								"firstColumn": 8,
								"lastColumn": 13,
								"lastLine": 1,
								"type": "ID",
								"original": "array",
								"parts": [
									"array"
								],
								"string": "array",
								"depth": 0,
								"idName": "array",
								"isSimple": true,
								"stringModeValue": "array"
							}
						],
						"eligibleHelper": true,
						"isHelper": true
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 30,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 15,
								"lastColumn": 30,
								"lastLine": 1,
								"type": "mustache",
								"strip": {
									"left": false,
									"right": false
								},
								"escaped": true,
								"sexpr": {
									"firstLine": 1,
									"firstColumn": 17,
									"lastColumn": 28,
									"lastLine": 1,
									"type": "sexpr",
									"id": {
										"firstLine": 1,
										"firstColumn": 17,
										"lastColumn": 23,
										"lastLine": 1,
										"type": "ID",
										"original": "wycats",
										"parts": [
											"wycats"
										],
										"string": "wycats",
										"depth": 0,
										"idName": "wycats",
										"isSimple": true,
										"stringModeValue": "wycats"
									},
									"params": [
										{
											"firstLine": 1,
											"firstColumn": 24,
											"lastColumn": 28,
											"lastLine": 1,
											"type": "ID",
											"original": "name",
											"parts": [
												"name"
											],
											"string": "name",
											"depth": 0,
											"idName": "name",
											"isSimple": true,
											"stringModeValue": "name"
										}
									],
									"isHelper": true,
									"eligibleHelper": true
								},
								"id": {
									"firstLine": 1,
									"firstColumn": 17,
									"lastColumn": 23,
									"lastLine": 1,
									"type": "ID",
									"original": "wycats",
									"parts": [
										"wycats"
									],
									"string": "wycats",
									"depth": 0,
									"idName": "wycats",
									"isSimple": true,
									"stringModeValue": "wycats"
								},
								"params": [
									{
										"firstLine": 1,
										"firstColumn": 24,
										"lastColumn": 28,
										"lastLine": 1,
										"type": "ID",
										"original": "name",
										"parts": [
											"name"
										],
										"string": "name",
										"depth": 0,
										"idName": "name",
										"isSimple": true,
										"stringModeValue": "name"
									}
								],
								"eligibleHelper": true,
								"isHelper": true
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "pushId",
					"args": [
						"ID",
						"array"
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"array"
						],
						null,
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "invokeKnownHelper",
					"args": [
						1,
						"each"
					]
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "pushId",
							"args": [
								"ID",
								"name"
							]
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"name"
								],
								null,
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "emptyHash",
							"args": []
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"wycats"
								],
								true,
								null
							]
						},
						{
							"opcode": "invokeHelper",
							"args": [
								1,
								"wycats",
								true
							]
						},
						{
							"opcode": "appendEscaped",
							"args": []
						}
					],
					"children": [],
					"depths": {
						"list": []
					},
					"options": {
						"trackIds": true,
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"trackIds": true,
					"isSimple": true
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"trackIds": true,
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"trackIds": true,
			"guid": 1,
			"isSimple": true
		}
	},
	{
		"description": "#each",
		"it": "should track contextPath for keys",
		"template": "{{#each object}}{{wycats name}}{{/each}}",
		"data": {
			"object": {
				"foo": {
					"name": "foo"
				},
				"bar": {
					"name": "bar"
				}
			}
		},
		"expected": "foo:object.foo\nbar:object.bar\n",
		"compileOptions": {
			"trackIds": true,
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"wycats": {
				"!code": true,
				"javascript": "function (name, options) {\n        return name + ':' + options.data.contextPath + '\\n';\n      }",
				"php": "function($name, $options) {\n        return $name . ':' . $options['data']['contextPath'] . \"\\n\";\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 40,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 40,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 16,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 14,
							"lastLine": 1,
							"type": "sexpr",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 7,
								"lastLine": 1,
								"type": "ID",
								"original": "each",
								"parts": [
									"each"
								],
								"string": "each",
								"depth": 0,
								"idName": "each",
								"isSimple": true,
								"stringModeValue": "each"
							},
							"params": [
								{
									"firstLine": 1,
									"firstColumn": 8,
									"lastColumn": 14,
									"lastLine": 1,
									"type": "ID",
									"original": "object",
									"parts": [
										"object"
									],
									"string": "object",
									"depth": 0,
									"idName": "object",
									"isSimple": true,
									"stringModeValue": "object"
								}
							],
							"isHelper": true,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 7,
							"lastLine": 1,
							"type": "ID",
							"original": "each",
							"parts": [
								"each"
							],
							"string": "each",
							"depth": 0,
							"idName": "each",
							"isSimple": true,
							"stringModeValue": "each"
						},
						"params": [
							{
								"firstLine": 1,
								"firstColumn": 8,
								"lastColumn": 14,
								"lastLine": 1,
								"type": "ID",
								"original": "object",
								"parts": [
									"object"
								],
								"string": "object",
								"depth": 0,
								"idName": "object",
								"isSimple": true,
								"stringModeValue": "object"
							}
						],
						"eligibleHelper": true,
						"isHelper": true
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 31,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 16,
								"lastColumn": 31,
								"lastLine": 1,
								"type": "mustache",
								"strip": {
									"left": false,
									"right": false
								},
								"escaped": true,
								"sexpr": {
									"firstLine": 1,
									"firstColumn": 18,
									"lastColumn": 29,
									"lastLine": 1,
									"type": "sexpr",
									"id": {
										"firstLine": 1,
										"firstColumn": 18,
										"lastColumn": 24,
										"lastLine": 1,
										"type": "ID",
										"original": "wycats",
										"parts": [
											"wycats"
										],
										"string": "wycats",
										"depth": 0,
										"idName": "wycats",
										"isSimple": true,
										"stringModeValue": "wycats"
									},
									"params": [
										{
											"firstLine": 1,
											"firstColumn": 25,
											"lastColumn": 29,
											"lastLine": 1,
											"type": "ID",
											"original": "name",
											"parts": [
												"name"
											],
											"string": "name",
											"depth": 0,
											"idName": "name",
											"isSimple": true,
											"stringModeValue": "name"
										}
									],
									"isHelper": true,
									"eligibleHelper": true
								},
								"id": {
									"firstLine": 1,
									"firstColumn": 18,
									"lastColumn": 24,
									"lastLine": 1,
									"type": "ID",
									"original": "wycats",
									"parts": [
										"wycats"
									],
									"string": "wycats",
									"depth": 0,
									"idName": "wycats",
									"isSimple": true,
									"stringModeValue": "wycats"
								},
								"params": [
									{
										"firstLine": 1,
										"firstColumn": 25,
										"lastColumn": 29,
										"lastLine": 1,
										"type": "ID",
										"original": "name",
										"parts": [
											"name"
										],
										"string": "name",
										"depth": 0,
										"idName": "name",
										"isSimple": true,
										"stringModeValue": "name"
									}
								],
								"eligibleHelper": true,
								"isHelper": true
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "pushId",
					"args": [
						"ID",
						"object"
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"object"
						],
						null,
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "invokeKnownHelper",
					"args": [
						1,
						"each"
					]
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "pushId",
							"args": [
								"ID",
								"name"
							]
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"name"
								],
								null,
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "emptyHash",
							"args": []
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"wycats"
								],
								true,
								null
							]
						},
						{
							"opcode": "invokeHelper",
							"args": [
								1,
								"wycats",
								true
							]
						},
						{
							"opcode": "appendEscaped",
							"args": []
						}
					],
					"children": [],
					"depths": {
						"list": []
					},
					"options": {
						"trackIds": true,
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"trackIds": true,
					"isSimple": true
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"trackIds": true,
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"trackIds": true,
			"guid": 1,
			"isSimple": true
		}
	},
	{
		"description": "#each",
		"it": "should handle nesting",
		"template": "{{#each .}}{{#each .}}{{wycats name}}{{/each}}{{/each}}",
		"data": {
			"array": [
				{
					"name": "foo"
				},
				{
					"name": "bar"
				}
			]
		},
		"expected": "foo:.array..0\nbar:.array..1\n",
		"compileOptions": {
			"trackIds": true,
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"wycats": {
				"!code": true,
				"javascript": "function (name, options) {\n        return name + ':' + options.data.contextPath + '\\n';\n      }",
				"php": "function($name, $options) {\n        return $name . ':' . $options['data']['contextPath'] . \"\\n\";\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 55,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 55,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 11,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 9,
							"lastLine": 1,
							"type": "sexpr",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 7,
								"lastLine": 1,
								"type": "ID",
								"original": "each",
								"parts": [
									"each"
								],
								"string": "each",
								"depth": 0,
								"idName": "each",
								"isSimple": true,
								"stringModeValue": "each"
							},
							"params": [
								{
									"firstLine": 1,
									"firstColumn": 8,
									"lastColumn": 9,
									"lastLine": 1,
									"type": "ID",
									"isScoped": true,
									"original": ".",
									"parts": [],
									"string": "",
									"depth": 0,
									"idName": "",
									"isSimple": false,
									"stringModeValue": ""
								}
							],
							"isHelper": true,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 7,
							"lastLine": 1,
							"type": "ID",
							"original": "each",
							"parts": [
								"each"
							],
							"string": "each",
							"depth": 0,
							"idName": "each",
							"isSimple": true,
							"stringModeValue": "each"
						},
						"params": [
							{
								"firstLine": 1,
								"firstColumn": 8,
								"lastColumn": 9,
								"lastLine": 1,
								"type": "ID",
								"isScoped": true,
								"original": ".",
								"parts": [],
								"string": "",
								"depth": 0,
								"idName": "",
								"isSimple": false,
								"stringModeValue": ""
							}
						],
						"eligibleHelper": true,
						"isHelper": true
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 46,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 11,
								"lastColumn": 46,
								"lastLine": 1,
								"type": "block",
								"mustache": {
									"firstLine": 1,
									"firstColumn": 11,
									"lastColumn": 22,
									"lastLine": 1,
									"type": "mustache",
									"strip": {
										"left": false,
										"right": false
									},
									"escaped": true,
									"sexpr": {
										"firstLine": 1,
										"firstColumn": 14,
										"lastColumn": 20,
										"lastLine": 1,
										"type": "sexpr",
										"id": {
											"firstLine": 1,
											"firstColumn": 14,
											"lastColumn": 18,
											"lastLine": 1,
											"type": "ID",
											"original": "each",
											"parts": [
												"each"
											],
											"string": "each",
											"depth": 0,
											"idName": "each",
											"isSimple": true,
											"stringModeValue": "each"
										},
										"params": [
											{
												"firstLine": 1,
												"firstColumn": 19,
												"lastColumn": 20,
												"lastLine": 1,
												"type": "ID",
												"isScoped": true,
												"original": ".",
												"parts": [],
												"string": "",
												"depth": 0,
												"idName": "",
												"isSimple": false,
												"stringModeValue": ""
											}
										],
										"isHelper": true,
										"eligibleHelper": true
									},
									"id": {
										"firstLine": 1,
										"firstColumn": 14,
										"lastColumn": 18,
										"lastLine": 1,
										"type": "ID",
										"original": "each",
										"parts": [
											"each"
										],
										"string": "each",
										"depth": 0,
										"idName": "each",
										"isSimple": true,
										"stringModeValue": "each"
									},
									"params": [
										{
											"firstLine": 1,
											"firstColumn": 19,
											"lastColumn": 20,
											"lastLine": 1,
											"type": "ID",
											"isScoped": true,
											"original": ".",
											"parts": [],
											"string": "",
											"depth": 0,
											"idName": "",
											"isSimple": false,
											"stringModeValue": ""
										}
									],
									"eligibleHelper": true,
									"isHelper": true
								},
								"program": {
									"firstLine": 1,
									"firstColumn": 11,
									"lastColumn": 37,
									"lastLine": 1,
									"type": "program",
									"statements": [
										{
											"firstLine": 1,
											"firstColumn": 22,
											"lastColumn": 37,
											"lastLine": 1,
											"type": "mustache",
											"strip": {
												"left": false,
												"right": false
											},
											"escaped": true,
											"sexpr": {
												"firstLine": 1,
												"firstColumn": 24,
												"lastColumn": 35,
												"lastLine": 1,
												"type": "sexpr",
												"id": {
													"firstLine": 1,
													"firstColumn": 24,
													"lastColumn": 30,
													"lastLine": 1,
													"type": "ID",
													"original": "wycats",
													"parts": [
														"wycats"
													],
													"string": "wycats",
													"depth": 0,
													"idName": "wycats",
													"isSimple": true,
													"stringModeValue": "wycats"
												},
												"params": [
													{
														"firstLine": 1,
														"firstColumn": 31,
														"lastColumn": 35,
														"lastLine": 1,
														"type": "ID",
														"original": "name",
														"parts": [
															"name"
														],
														"string": "name",
														"depth": 0,
														"idName": "name",
														"isSimple": true,
														"stringModeValue": "name"
													}
												],
												"isHelper": true,
												"eligibleHelper": true
											},
											"id": {
												"firstLine": 1,
												"firstColumn": 24,
												"lastColumn": 30,
												"lastLine": 1,
												"type": "ID",
												"original": "wycats",
												"parts": [
													"wycats"
												],
												"string": "wycats",
												"depth": 0,
												"idName": "wycats",
												"isSimple": true,
												"stringModeValue": "wycats"
											},
											"params": [
												{
													"firstLine": 1,
													"firstColumn": 31,
													"lastColumn": 35,
													"lastLine": 1,
													"type": "ID",
													"original": "name",
													"parts": [
														"name"
													],
													"string": "name",
													"depth": 0,
													"idName": "name",
													"isSimple": true,
													"stringModeValue": "name"
												}
											],
											"eligibleHelper": true,
											"isHelper": true
										}
									],
									"strip": {}
								},
								"strip": {
									"left": false,
									"right": false
								}
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "pushId",
					"args": [
						"ID",
						""
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "pushContext",
					"args": []
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "invokeKnownHelper",
					"args": [
						1,
						"each"
					]
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "pushId",
							"args": [
								"ID",
								""
							]
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "pushContext",
							"args": []
						},
						{
							"opcode": "pushProgram",
							"args": [
								0
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "emptyHash",
							"args": []
						},
						{
							"opcode": "invokeKnownHelper",
							"args": [
								1,
								"each"
							]
						},
						{
							"opcode": "append",
							"args": []
						}
					],
					"children": [
						{
							"opcodes": [
								{
									"opcode": "pushId",
									"args": [
										"ID",
										"name"
									]
								},
								{
									"opcode": "getContext",
									"args": [
										0
									]
								},
								{
									"opcode": "lookupOnContext",
									"args": [
										[
											"name"
										],
										null,
										null
									]
								},
								{
									"opcode": "pushProgram",
									"args": [
										null
									]
								},
								{
									"opcode": "pushProgram",
									"args": [
										null
									]
								},
								{
									"opcode": "emptyHash",
									"args": []
								},
								{
									"opcode": "getContext",
									"args": [
										0
									]
								},
								{
									"opcode": "lookupOnContext",
									"args": [
										[
											"wycats"
										],
										true,
										null
									]
								},
								{
									"opcode": "invokeHelper",
									"args": [
										1,
										"wycats",
										true
									]
								},
								{
									"opcode": "appendEscaped",
									"args": []
								}
							],
							"children": [],
							"depths": {
								"list": []
							},
							"options": {
								"trackIds": true,
								"data": true,
								"knownHelpers": {
									"helperMissing": true,
									"blockHelperMissing": true,
									"each": true,
									"if": true,
									"unless": true,
									"with": true,
									"log": true,
									"lookup": true
								}
							},
							"trackIds": true,
							"isSimple": true
						}
					],
					"depths": {
						"list": []
					},
					"options": {
						"trackIds": true,
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"trackIds": true,
					"guid": 1,
					"isSimple": true
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"trackIds": true,
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"trackIds": true,
			"guid": 1,
			"isSimple": true
		}
	},
	{
		"description": "#with",
		"it": "should track contextPath",
		"template": "{{#with field}}{{wycats name}}{{/with}}",
		"data": {
			"field": {
				"name": "foo"
			}
		},
		"expected": "foo:field\n",
		"compileOptions": {
			"trackIds": true,
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"wycats": {
				"!code": true,
				"javascript": "function (name, options) {\n        return name + ':' + options.data.contextPath + '\\n';\n      }",
				"php": "function($name, $options) {\n        return $name . ':' . $options['data']['contextPath'] . \"\\n\";\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 39,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 39,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 15,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 13,
							"lastLine": 1,
							"type": "sexpr",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 7,
								"lastLine": 1,
								"type": "ID",
								"original": "with",
								"parts": [
									"with"
								],
								"string": "with",
								"depth": 0,
								"idName": "with",
								"isSimple": true,
								"stringModeValue": "with"
							},
							"params": [
								{
									"firstLine": 1,
									"firstColumn": 8,
									"lastColumn": 13,
									"lastLine": 1,
									"type": "ID",
									"original": "field",
									"parts": [
										"field"
									],
									"string": "field",
									"depth": 0,
									"idName": "field",
									"isSimple": true,
									"stringModeValue": "field"
								}
							],
							"isHelper": true,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 7,
							"lastLine": 1,
							"type": "ID",
							"original": "with",
							"parts": [
								"with"
							],
							"string": "with",
							"depth": 0,
							"idName": "with",
							"isSimple": true,
							"stringModeValue": "with"
						},
						"params": [
							{
								"firstLine": 1,
								"firstColumn": 8,
								"lastColumn": 13,
								"lastLine": 1,
								"type": "ID",
								"original": "field",
								"parts": [
									"field"
								],
								"string": "field",
								"depth": 0,
								"idName": "field",
								"isSimple": true,
								"stringModeValue": "field"
							}
						],
						"eligibleHelper": true,
						"isHelper": true
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 30,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 15,
								"lastColumn": 30,
								"lastLine": 1,
								"type": "mustache",
								"strip": {
									"left": false,
									"right": false
								},
								"escaped": true,
								"sexpr": {
									"firstLine": 1,
									"firstColumn": 17,
									"lastColumn": 28,
									"lastLine": 1,
									"type": "sexpr",
									"id": {
										"firstLine": 1,
										"firstColumn": 17,
										"lastColumn": 23,
										"lastLine": 1,
										"type": "ID",
										"original": "wycats",
										"parts": [
											"wycats"
										],
										"string": "wycats",
										"depth": 0,
										"idName": "wycats",
										"isSimple": true,
										"stringModeValue": "wycats"
									},
									"params": [
										{
											"firstLine": 1,
											"firstColumn": 24,
											"lastColumn": 28,
											"lastLine": 1,
											"type": "ID",
											"original": "name",
											"parts": [
												"name"
											],
											"string": "name",
											"depth": 0,
											"idName": "name",
											"isSimple": true,
											"stringModeValue": "name"
										}
									],
									"isHelper": true,
									"eligibleHelper": true
								},
								"id": {
									"firstLine": 1,
									"firstColumn": 17,
									"lastColumn": 23,
									"lastLine": 1,
									"type": "ID",
									"original": "wycats",
									"parts": [
										"wycats"
									],
									"string": "wycats",
									"depth": 0,
									"idName": "wycats",
									"isSimple": true,
									"stringModeValue": "wycats"
								},
								"params": [
									{
										"firstLine": 1,
										"firstColumn": 24,
										"lastColumn": 28,
										"lastLine": 1,
										"type": "ID",
										"original": "name",
										"parts": [
											"name"
										],
										"string": "name",
										"depth": 0,
										"idName": "name",
										"isSimple": true,
										"stringModeValue": "name"
									}
								],
								"eligibleHelper": true,
								"isHelper": true
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "pushId",
					"args": [
						"ID",
						"field"
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"field"
						],
						null,
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "invokeKnownHelper",
					"args": [
						1,
						"with"
					]
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "pushId",
							"args": [
								"ID",
								"name"
							]
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"name"
								],
								null,
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "emptyHash",
							"args": []
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"wycats"
								],
								true,
								null
							]
						},
						{
							"opcode": "invokeHelper",
							"args": [
								1,
								"wycats",
								true
							]
						},
						{
							"opcode": "appendEscaped",
							"args": []
						}
					],
					"children": [],
					"depths": {
						"list": []
					},
					"options": {
						"trackIds": true,
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"trackIds": true,
					"isSimple": true
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"trackIds": true,
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"trackIds": true,
			"guid": 1,
			"isSimple": true
		}
	},
	{
		"description": "#with",
		"it": "should handle nesting",
		"template": "{{#with bat}}{{#with field}}{{wycats name}}{{/with}}{{/with}}",
		"data": {
			"bat": {
				"field": {
					"name": "foo"
				}
			}
		},
		"expected": "foo:bat.field\n",
		"compileOptions": {
			"trackIds": true,
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"wycats": {
				"!code": true,
				"javascript": "function (name, options) {\n        return name + ':' + options.data.contextPath + '\\n';\n      }",
				"php": "function($name, $options) {\n        return $name . ':' . $options['data']['contextPath'] . \"\\n\";\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 61,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 61,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 13,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 11,
							"lastLine": 1,
							"type": "sexpr",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 7,
								"lastLine": 1,
								"type": "ID",
								"original": "with",
								"parts": [
									"with"
								],
								"string": "with",
								"depth": 0,
								"idName": "with",
								"isSimple": true,
								"stringModeValue": "with"
							},
							"params": [
								{
									"firstLine": 1,
									"firstColumn": 8,
									"lastColumn": 11,
									"lastLine": 1,
									"type": "ID",
									"original": "bat",
									"parts": [
										"bat"
									],
									"string": "bat",
									"depth": 0,
									"idName": "bat",
									"isSimple": true,
									"stringModeValue": "bat"
								}
							],
							"isHelper": true,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 7,
							"lastLine": 1,
							"type": "ID",
							"original": "with",
							"parts": [
								"with"
							],
							"string": "with",
							"depth": 0,
							"idName": "with",
							"isSimple": true,
							"stringModeValue": "with"
						},
						"params": [
							{
								"firstLine": 1,
								"firstColumn": 8,
								"lastColumn": 11,
								"lastLine": 1,
								"type": "ID",
								"original": "bat",
								"parts": [
									"bat"
								],
								"string": "bat",
								"depth": 0,
								"idName": "bat",
								"isSimple": true,
								"stringModeValue": "bat"
							}
						],
						"eligibleHelper": true,
						"isHelper": true
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 52,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 13,
								"lastColumn": 52,
								"lastLine": 1,
								"type": "block",
								"mustache": {
									"firstLine": 1,
									"firstColumn": 13,
									"lastColumn": 28,
									"lastLine": 1,
									"type": "mustache",
									"strip": {
										"left": false,
										"right": false
									},
									"escaped": true,
									"sexpr": {
										"firstLine": 1,
										"firstColumn": 16,
										"lastColumn": 26,
										"lastLine": 1,
										"type": "sexpr",
										"id": {
											"firstLine": 1,
											"firstColumn": 16,
											"lastColumn": 20,
											"lastLine": 1,
											"type": "ID",
											"original": "with",
											"parts": [
												"with"
											],
											"string": "with",
											"depth": 0,
											"idName": "with",
											"isSimple": true,
											"stringModeValue": "with"
										},
										"params": [
											{
												"firstLine": 1,
												"firstColumn": 21,
												"lastColumn": 26,
												"lastLine": 1,
												"type": "ID",
												"original": "field",
												"parts": [
													"field"
												],
												"string": "field",
												"depth": 0,
												"idName": "field",
												"isSimple": true,
												"stringModeValue": "field"
											}
										],
										"isHelper": true,
										"eligibleHelper": true
									},
									"id": {
										"firstLine": 1,
										"firstColumn": 16,
										"lastColumn": 20,
										"lastLine": 1,
										"type": "ID",
										"original": "with",
										"parts": [
											"with"
										],
										"string": "with",
										"depth": 0,
										"idName": "with",
										"isSimple": true,
										"stringModeValue": "with"
									},
									"params": [
										{
											"firstLine": 1,
											"firstColumn": 21,
											"lastColumn": 26,
											"lastLine": 1,
											"type": "ID",
											"original": "field",
											"parts": [
												"field"
											],
											"string": "field",
											"depth": 0,
											"idName": "field",
											"isSimple": true,
											"stringModeValue": "field"
										}
									],
									"eligibleHelper": true,
									"isHelper": true
								},
								"program": {
									"firstLine": 1,
									"firstColumn": 13,
									"lastColumn": 43,
									"lastLine": 1,
									"type": "program",
									"statements": [
										{
											"firstLine": 1,
											"firstColumn": 28,
											"lastColumn": 43,
											"lastLine": 1,
											"type": "mustache",
											"strip": {
												"left": false,
												"right": false
											},
											"escaped": true,
											"sexpr": {
												"firstLine": 1,
												"firstColumn": 30,
												"lastColumn": 41,
												"lastLine": 1,
												"type": "sexpr",
												"id": {
													"firstLine": 1,
													"firstColumn": 30,
													"lastColumn": 36,
													"lastLine": 1,
													"type": "ID",
													"original": "wycats",
													"parts": [
														"wycats"
													],
													"string": "wycats",
													"depth": 0,
													"idName": "wycats",
													"isSimple": true,
													"stringModeValue": "wycats"
												},
												"params": [
													{
														"firstLine": 1,
														"firstColumn": 37,
														"lastColumn": 41,
														"lastLine": 1,
														"type": "ID",
														"original": "name",
														"parts": [
															"name"
														],
														"string": "name",
														"depth": 0,
														"idName": "name",
														"isSimple": true,
														"stringModeValue": "name"
													}
												],
												"isHelper": true,
												"eligibleHelper": true
											},
											"id": {
												"firstLine": 1,
												"firstColumn": 30,
												"lastColumn": 36,
												"lastLine": 1,
												"type": "ID",
												"original": "wycats",
												"parts": [
													"wycats"
												],
												"string": "wycats",
												"depth": 0,
												"idName": "wycats",
												"isSimple": true,
												"stringModeValue": "wycats"
											},
											"params": [
												{
													"firstLine": 1,
													"firstColumn": 37,
													"lastColumn": 41,
													"lastLine": 1,
													"type": "ID",
													"original": "name",
													"parts": [
														"name"
													],
													"string": "name",
													"depth": 0,
													"idName": "name",
													"isSimple": true,
													"stringModeValue": "name"
												}
											],
											"eligibleHelper": true,
											"isHelper": true
										}
									],
									"strip": {}
								},
								"strip": {
									"left": false,
									"right": false
								}
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "pushId",
					"args": [
						"ID",
						"bat"
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"bat"
						],
						null,
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "invokeKnownHelper",
					"args": [
						1,
						"with"
					]
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "pushId",
							"args": [
								"ID",
								"field"
							]
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"field"
								],
								null,
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								0
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "emptyHash",
							"args": []
						},
						{
							"opcode": "invokeKnownHelper",
							"args": [
								1,
								"with"
							]
						},
						{
							"opcode": "append",
							"args": []
						}
					],
					"children": [
						{
							"opcodes": [
								{
									"opcode": "pushId",
									"args": [
										"ID",
										"name"
									]
								},
								{
									"opcode": "getContext",
									"args": [
										0
									]
								},
								{
									"opcode": "lookupOnContext",
									"args": [
										[
											"name"
										],
										null,
										null
									]
								},
								{
									"opcode": "pushProgram",
									"args": [
										null
									]
								},
								{
									"opcode": "pushProgram",
									"args": [
										null
									]
								},
								{
									"opcode": "emptyHash",
									"args": []
								},
								{
									"opcode": "getContext",
									"args": [
										0
									]
								},
								{
									"opcode": "lookupOnContext",
									"args": [
										[
											"wycats"
										],
										true,
										null
									]
								},
								{
									"opcode": "invokeHelper",
									"args": [
										1,
										"wycats",
										true
									]
								},
								{
									"opcode": "appendEscaped",
									"args": []
								}
							],
							"children": [],
							"depths": {
								"list": []
							},
							"options": {
								"trackIds": true,
								"data": true,
								"knownHelpers": {
									"helperMissing": true,
									"blockHelperMissing": true,
									"each": true,
									"if": true,
									"unless": true,
									"with": true,
									"log": true,
									"lookup": true
								}
							},
							"trackIds": true,
							"isSimple": true
						}
					],
					"depths": {
						"list": []
					},
					"options": {
						"trackIds": true,
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"trackIds": true,
					"guid": 1,
					"isSimple": true
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"trackIds": true,
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"trackIds": true,
			"guid": 1,
			"isSimple": true
		}
	},
	{
		"description": "#blockHelperMissing",
		"it": "should track contextPath for arrays",
		"template": "{{#field}}{{wycats name}}{{/field}}",
		"data": {
			"field": [
				{
					"name": "foo"
				}
			]
		},
		"expected": "foo:field.0\n",
		"compileOptions": {
			"trackIds": true,
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"wycats": {
				"!code": true,
				"javascript": "function (name, options) {\n        return name + ':' + options.data.contextPath + '\\n';\n      }",
				"php": "function($name, $options) {\n        return $name . ':' . $options['data']['contextPath'] . \"\\n\";\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 35,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 35,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 10,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "sexpr",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 8,
								"lastLine": 1,
								"type": "ID",
								"original": "field",
								"parts": [
									"field"
								],
								"string": "field",
								"depth": 0,
								"idName": "field",
								"isSimple": true,
								"stringModeValue": "field"
							},
							"params": [],
							"isHelper": false,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "ID",
							"original": "field",
							"parts": [
								"field"
							],
							"string": "field",
							"depth": 0,
							"idName": "field",
							"isSimple": true,
							"stringModeValue": "field"
						},
						"params": [],
						"eligibleHelper": true,
						"isHelper": false
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 25,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 10,
								"lastColumn": 25,
								"lastLine": 1,
								"type": "mustache",
								"strip": {
									"left": false,
									"right": false
								},
								"escaped": true,
								"sexpr": {
									"firstLine": 1,
									"firstColumn": 12,
									"lastColumn": 23,
									"lastLine": 1,
									"type": "sexpr",
									"id": {
										"firstLine": 1,
										"firstColumn": 12,
										"lastColumn": 18,
										"lastLine": 1,
										"type": "ID",
										"original": "wycats",
										"parts": [
											"wycats"
										],
										"string": "wycats",
										"depth": 0,
										"idName": "wycats",
										"isSimple": true,
										"stringModeValue": "wycats"
									},
									"params": [
										{
											"firstLine": 1,
											"firstColumn": 19,
											"lastColumn": 23,
											"lastLine": 1,
											"type": "ID",
											"original": "name",
											"parts": [
												"name"
											],
											"string": "name",
											"depth": 0,
											"idName": "name",
											"isSimple": true,
											"stringModeValue": "name"
										}
									],
									"isHelper": true,
									"eligibleHelper": true
								},
								"id": {
									"firstLine": 1,
									"firstColumn": 12,
									"lastColumn": 18,
									"lastLine": 1,
									"type": "ID",
									"original": "wycats",
									"parts": [
										"wycats"
									],
									"string": "wycats",
									"depth": 0,
									"idName": "wycats",
									"isSimple": true,
									"stringModeValue": "wycats"
								},
								"params": [
									{
										"firstLine": 1,
										"firstColumn": 19,
										"lastColumn": 23,
										"lastLine": 1,
										"type": "ID",
										"original": "name",
										"parts": [
											"name"
										],
										"string": "name",
										"depth": 0,
										"idName": "name",
										"isSimple": true,
										"stringModeValue": "name"
									}
								],
								"eligibleHelper": true,
								"isHelper": true
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"field"
						],
						null,
						null
					]
				},
				{
					"opcode": "invokeAmbiguous",
					"args": [
						"field",
						true
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "ambiguousBlockValue",
					"args": []
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "pushId",
							"args": [
								"ID",
								"name"
							]
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"name"
								],
								null,
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "emptyHash",
							"args": []
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"wycats"
								],
								true,
								null
							]
						},
						{
							"opcode": "invokeHelper",
							"args": [
								1,
								"wycats",
								true
							]
						},
						{
							"opcode": "appendEscaped",
							"args": []
						}
					],
					"children": [],
					"depths": {
						"list": []
					},
					"options": {
						"trackIds": true,
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"trackIds": true,
					"isSimple": true
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"trackIds": true,
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"trackIds": true,
			"guid": 1,
			"isSimple": true
		}
	},
	{
		"description": "#blockHelperMissing",
		"it": "should track contextPath for keys",
		"template": "{{#field}}{{wycats name}}{{/field}}",
		"data": {
			"field": {
				"name": "foo"
			}
		},
		"expected": "foo:field\n",
		"compileOptions": {
			"trackIds": true,
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"wycats": {
				"!code": true,
				"javascript": "function (name, options) {\n        return name + ':' + options.data.contextPath + '\\n';\n      }",
				"php": "function($name, $options) {\n        return $name . ':' . $options['data']['contextPath'] . \"\\n\";\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 35,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 35,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 10,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "sexpr",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 8,
								"lastLine": 1,
								"type": "ID",
								"original": "field",
								"parts": [
									"field"
								],
								"string": "field",
								"depth": 0,
								"idName": "field",
								"isSimple": true,
								"stringModeValue": "field"
							},
							"params": [],
							"isHelper": false,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "ID",
							"original": "field",
							"parts": [
								"field"
							],
							"string": "field",
							"depth": 0,
							"idName": "field",
							"isSimple": true,
							"stringModeValue": "field"
						},
						"params": [],
						"eligibleHelper": true,
						"isHelper": false
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 25,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 10,
								"lastColumn": 25,
								"lastLine": 1,
								"type": "mustache",
								"strip": {
									"left": false,
									"right": false
								},
								"escaped": true,
								"sexpr": {
									"firstLine": 1,
									"firstColumn": 12,
									"lastColumn": 23,
									"lastLine": 1,
									"type": "sexpr",
									"id": {
										"firstLine": 1,
										"firstColumn": 12,
										"lastColumn": 18,
										"lastLine": 1,
										"type": "ID",
										"original": "wycats",
										"parts": [
											"wycats"
										],
										"string": "wycats",
										"depth": 0,
										"idName": "wycats",
										"isSimple": true,
										"stringModeValue": "wycats"
									},
									"params": [
										{
											"firstLine": 1,
											"firstColumn": 19,
											"lastColumn": 23,
											"lastLine": 1,
											"type": "ID",
											"original": "name",
											"parts": [
												"name"
											],
											"string": "name",
											"depth": 0,
											"idName": "name",
											"isSimple": true,
											"stringModeValue": "name"
										}
									],
									"isHelper": true,
									"eligibleHelper": true
								},
								"id": {
									"firstLine": 1,
									"firstColumn": 12,
									"lastColumn": 18,
									"lastLine": 1,
									"type": "ID",
									"original": "wycats",
									"parts": [
										"wycats"
									],
									"string": "wycats",
									"depth": 0,
									"idName": "wycats",
									"isSimple": true,
									"stringModeValue": "wycats"
								},
								"params": [
									{
										"firstLine": 1,
										"firstColumn": 19,
										"lastColumn": 23,
										"lastLine": 1,
										"type": "ID",
										"original": "name",
										"parts": [
											"name"
										],
										"string": "name",
										"depth": 0,
										"idName": "name",
										"isSimple": true,
										"stringModeValue": "name"
									}
								],
								"eligibleHelper": true,
								"isHelper": true
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"field"
						],
						null,
						null
					]
				},
				{
					"opcode": "invokeAmbiguous",
					"args": [
						"field",
						true
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "ambiguousBlockValue",
					"args": []
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "pushId",
							"args": [
								"ID",
								"name"
							]
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"name"
								],
								null,
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "emptyHash",
							"args": []
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"wycats"
								],
								true,
								null
							]
						},
						{
							"opcode": "invokeHelper",
							"args": [
								1,
								"wycats",
								true
							]
						},
						{
							"opcode": "appendEscaped",
							"args": []
						}
					],
					"children": [],
					"depths": {
						"list": []
					},
					"options": {
						"trackIds": true,
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"trackIds": true,
					"isSimple": true
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"trackIds": true,
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"trackIds": true,
			"guid": 1,
			"isSimple": true
		}
	},
	{
		"description": "#blockHelperMissing",
		"it": "should handle nesting",
		"template": "{{#bat}}{{#field}}{{wycats name}}{{/field}}{{/bat}}",
		"data": {
			"bat": {
				"field": {
					"name": "foo"
				}
			}
		},
		"expected": "foo:bat.field\n",
		"compileOptions": {
			"trackIds": true,
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"wycats": {
				"!code": true,
				"javascript": "function (name, options) {\n        return name + ':' + options.data.contextPath + '\\n';\n      }",
				"php": "function($name, $options) {\n        return $name . ':' . $options['data']['contextPath'] . '\\n';\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 51,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 51,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 8,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 6,
							"lastLine": 1,
							"type": "sexpr",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 6,
								"lastLine": 1,
								"type": "ID",
								"original": "bat",
								"parts": [
									"bat"
								],
								"string": "bat",
								"depth": 0,
								"idName": "bat",
								"isSimple": true,
								"stringModeValue": "bat"
							},
							"params": [],
							"isHelper": false,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 6,
							"lastLine": 1,
							"type": "ID",
							"original": "bat",
							"parts": [
								"bat"
							],
							"string": "bat",
							"depth": 0,
							"idName": "bat",
							"isSimple": true,
							"stringModeValue": "bat"
						},
						"params": [],
						"eligibleHelper": true,
						"isHelper": false
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 43,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 8,
								"lastColumn": 43,
								"lastLine": 1,
								"type": "block",
								"mustache": {
									"firstLine": 1,
									"firstColumn": 8,
									"lastColumn": 18,
									"lastLine": 1,
									"type": "mustache",
									"strip": {
										"left": false,
										"right": false
									},
									"escaped": true,
									"sexpr": {
										"firstLine": 1,
										"firstColumn": 11,
										"lastColumn": 16,
										"lastLine": 1,
										"type": "sexpr",
										"id": {
											"firstLine": 1,
											"firstColumn": 11,
											"lastColumn": 16,
											"lastLine": 1,
											"type": "ID",
											"original": "field",
											"parts": [
												"field"
											],
											"string": "field",
											"depth": 0,
											"idName": "field",
											"isSimple": true,
											"stringModeValue": "field"
										},
										"params": [],
										"isHelper": false,
										"eligibleHelper": true
									},
									"id": {
										"firstLine": 1,
										"firstColumn": 11,
										"lastColumn": 16,
										"lastLine": 1,
										"type": "ID",
										"original": "field",
										"parts": [
											"field"
										],
										"string": "field",
										"depth": 0,
										"idName": "field",
										"isSimple": true,
										"stringModeValue": "field"
									},
									"params": [],
									"eligibleHelper": true,
									"isHelper": false
								},
								"program": {
									"firstLine": 1,
									"firstColumn": 8,
									"lastColumn": 33,
									"lastLine": 1,
									"type": "program",
									"statements": [
										{
											"firstLine": 1,
											"firstColumn": 18,
											"lastColumn": 33,
											"lastLine": 1,
											"type": "mustache",
											"strip": {
												"left": false,
												"right": false
											},
											"escaped": true,
											"sexpr": {
												"firstLine": 1,
												"firstColumn": 20,
												"lastColumn": 31,
												"lastLine": 1,
												"type": "sexpr",
												"id": {
													"firstLine": 1,
													"firstColumn": 20,
													"lastColumn": 26,
													"lastLine": 1,
													"type": "ID",
													"original": "wycats",
													"parts": [
														"wycats"
													],
													"string": "wycats",
													"depth": 0,
													"idName": "wycats",
													"isSimple": true,
													"stringModeValue": "wycats"
												},
												"params": [
													{
														"firstLine": 1,
														"firstColumn": 27,
														"lastColumn": 31,
														"lastLine": 1,
														"type": "ID",
														"original": "name",
														"parts": [
															"name"
														],
														"string": "name",
														"depth": 0,
														"idName": "name",
														"isSimple": true,
														"stringModeValue": "name"
													}
												],
												"isHelper": true,
												"eligibleHelper": true
											},
											"id": {
												"firstLine": 1,
												"firstColumn": 20,
												"lastColumn": 26,
												"lastLine": 1,
												"type": "ID",
												"original": "wycats",
												"parts": [
													"wycats"
												],
												"string": "wycats",
												"depth": 0,
												"idName": "wycats",
												"isSimple": true,
												"stringModeValue": "wycats"
											},
											"params": [
												{
													"firstLine": 1,
													"firstColumn": 27,
													"lastColumn": 31,
													"lastLine": 1,
													"type": "ID",
													"original": "name",
													"parts": [
														"name"
													],
													"string": "name",
													"depth": 0,
													"idName": "name",
													"isSimple": true,
													"stringModeValue": "name"
												}
											],
											"eligibleHelper": true,
											"isHelper": true
										}
									],
									"strip": {}
								},
								"strip": {
									"left": false,
									"right": false
								}
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"bat"
						],
						null,
						null
					]
				},
				{
					"opcode": "invokeAmbiguous",
					"args": [
						"bat",
						true
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "ambiguousBlockValue",
					"args": []
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								0
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"field"
								],
								null,
								null
							]
						},
						{
							"opcode": "invokeAmbiguous",
							"args": [
								"field",
								true
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								0
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "emptyHash",
							"args": []
						},
						{
							"opcode": "ambiguousBlockValue",
							"args": []
						},
						{
							"opcode": "append",
							"args": []
						}
					],
					"children": [
						{
							"opcodes": [
								{
									"opcode": "pushId",
									"args": [
										"ID",
										"name"
									]
								},
								{
									"opcode": "getContext",
									"args": [
										0
									]
								},
								{
									"opcode": "lookupOnContext",
									"args": [
										[
											"name"
										],
										null,
										null
									]
								},
								{
									"opcode": "pushProgram",
									"args": [
										null
									]
								},
								{
									"opcode": "pushProgram",
									"args": [
										null
									]
								},
								{
									"opcode": "emptyHash",
									"args": []
								},
								{
									"opcode": "getContext",
									"args": [
										0
									]
								},
								{
									"opcode": "lookupOnContext",
									"args": [
										[
											"wycats"
										],
										true,
										null
									]
								},
								{
									"opcode": "invokeHelper",
									"args": [
										1,
										"wycats",
										true
									]
								},
								{
									"opcode": "appendEscaped",
									"args": []
								}
							],
							"children": [],
							"depths": {
								"list": []
							},
							"options": {
								"trackIds": true,
								"data": true,
								"knownHelpers": {
									"helperMissing": true,
									"blockHelperMissing": true,
									"each": true,
									"if": true,
									"unless": true,
									"with": true,
									"log": true,
									"lookup": true
								}
							},
							"trackIds": true,
							"isSimple": true
						}
					],
					"depths": {
						"list": []
					},
					"options": {
						"trackIds": true,
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"trackIds": true,
					"guid": 1,
					"isSimple": true
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"trackIds": true,
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"trackIds": true,
			"guid": 1,
			"isSimple": true
		}
	}
]