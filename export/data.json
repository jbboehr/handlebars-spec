[
	{
		"description": "data",
		"it": "passing in data to a compiled function that expects data - works with helpers",
		"template": "{{hello}}",
		"data": {
			"noun": "cat",
			"adjective": "happy"
		},
		"expected": "happy cat",
		"message": "Data output by helper",
		"options": {},
		"compileOptions": {
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"hello": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data.adjective + \" \"  + this.noun;\n      }",
				"php": "function($options) {\n        return $options['data']['adjective'] . \" \"  . $options->scope['noun'];\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 9,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 9,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 7,
						"lastLine": 1,
						"type": "sexpr",
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 7,
							"lastLine": 1,
							"type": "ID",
							"original": "hello",
							"parts": [
								"hello"
							],
							"string": "hello",
							"depth": 0,
							"idName": "hello",
							"isSimple": true,
							"stringModeValue": "hello"
						},
						"params": [],
						"isHelper": false,
						"eligibleHelper": true
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 7,
						"lastLine": 1,
						"type": "ID",
						"original": "hello",
						"parts": [
							"hello"
						],
						"string": "hello",
						"depth": 0,
						"idName": "hello",
						"isSimple": true,
						"stringModeValue": "hello"
					},
					"params": [],
					"eligibleHelper": true,
					"isHelper": false
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"hello"
						],
						null,
						null
					]
				},
				{
					"opcode": "invokeAmbiguous",
					"args": [
						"hello",
						false
					]
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"isSimple": true
		}
	},
	{
		"description": "data",
		"it": "data can be looked up via @foo",
		"template": "{{@hello}}",
		"data": {
			"hello": "hello"
		},
		"expected": "hello",
		"message": "@foo retrieves template data",
		"options": {},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 10,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 10,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 8,
						"lastLine": 1,
						"type": "sexpr",
						"hash": null,
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "DATA",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 8,
								"lastLine": 1,
								"type": "ID",
								"original": "hello",
								"parts": [
									"hello"
								],
								"string": "hello",
								"depth": 0,
								"idName": "hello",
								"isSimple": true,
								"stringModeValue": "hello"
							},
							"stringModeValue": "hello",
							"idName": "@hello"
						},
						"params": [],
						"isHelper": false
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 8,
						"lastLine": 1,
						"type": "DATA",
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "ID",
							"original": "hello",
							"parts": [
								"hello"
							],
							"string": "hello",
							"depth": 0,
							"idName": "hello",
							"isSimple": true,
							"stringModeValue": "hello"
						},
						"stringModeValue": "hello",
						"idName": "@hello"
					},
					"params": [],
					"hash": null,
					"isHelper": false
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "lookupData",
					"args": [
						0,
						[
							"hello"
						]
					]
				},
				{
					"opcode": "resolvePossibleLambda",
					"args": []
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"isSimple": true
		}
	},
	{
		"description": "data",
		"it": "deep @foo triggers automatic top-level data",
		"template": "{{#let world=\"world\"}}{{#if foo}}{{#if foo}}Hello {{@world}}{{/if}}{{/if}}{{/let}}",
		"data": {
			"foo": true
		},
		"expected": "Hello world",
		"message": "Automatic data was triggered",
		"helpers": {
			"let": {
				"!code": true,
				"javascript": "function (options) {\n      var frame = Handlebars.createFrame(options.data);\n\n      for (var prop in options.hash) {\n        frame[prop] = options.hash[prop];\n      }\n      return options.fn(this, { data: frame });\n    }",
				"php": "function($options) {\n        $frame = $options['data'];\n        foreach( $options['hash'] as $prop => $v ) {\n          $frame[$prop] = $options['hash'][$prop];\n        }\n        return $options->fn($options->scope, array(\"data\" => $frame));\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 82,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 82,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 22,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 20,
							"lastLine": 1,
							"type": "sexpr",
							"hash": {
								"firstLine": 1,
								"firstColumn": 7,
								"lastColumn": 20,
								"lastLine": 1,
								"type": "hash",
								"pairs": [
									[
										"world",
										{
											"firstLine": 1,
											"firstColumn": 13,
											"lastColumn": 20,
											"lastLine": 1,
											"type": "STRING",
											"stringModeValue": "world",
											"string": "world",
											"original": "world"
										}
									]
								]
							},
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 6,
								"lastLine": 1,
								"type": "ID",
								"original": "let",
								"parts": [
									"let"
								],
								"string": "let",
								"depth": 0,
								"idName": "let",
								"isSimple": true,
								"stringModeValue": "let"
							},
							"params": [],
							"isHelper": true,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 6,
							"lastLine": 1,
							"type": "ID",
							"original": "let",
							"parts": [
								"let"
							],
							"string": "let",
							"depth": 0,
							"idName": "let",
							"isSimple": true,
							"stringModeValue": "let"
						},
						"params": [],
						"hash": {
							"firstLine": 1,
							"firstColumn": 7,
							"lastColumn": 20,
							"lastLine": 1,
							"type": "hash",
							"pairs": [
								[
									"world",
									{
										"firstLine": 1,
										"firstColumn": 13,
										"lastColumn": 20,
										"lastLine": 1,
										"type": "STRING",
										"stringModeValue": "world",
										"string": "world",
										"original": "world"
									}
								]
							]
						},
						"eligibleHelper": true,
						"isHelper": true
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 74,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 22,
								"lastColumn": 74,
								"lastLine": 1,
								"type": "block",
								"mustache": {
									"firstLine": 1,
									"firstColumn": 22,
									"lastColumn": 33,
									"lastLine": 1,
									"type": "mustache",
									"strip": {
										"left": false,
										"right": false
									},
									"escaped": true,
									"sexpr": {
										"firstLine": 1,
										"firstColumn": 25,
										"lastColumn": 31,
										"lastLine": 1,
										"type": "sexpr",
										"id": {
											"firstLine": 1,
											"firstColumn": 25,
											"lastColumn": 27,
											"lastLine": 1,
											"type": "ID",
											"original": "if",
											"parts": [
												"if"
											],
											"string": "if",
											"depth": 0,
											"idName": "if",
											"isSimple": true,
											"stringModeValue": "if"
										},
										"params": [
											{
												"firstLine": 1,
												"firstColumn": 28,
												"lastColumn": 31,
												"lastLine": 1,
												"type": "ID",
												"original": "foo",
												"parts": [
													"foo"
												],
												"string": "foo",
												"depth": 0,
												"idName": "foo",
												"isSimple": true,
												"stringModeValue": "foo"
											}
										],
										"isHelper": true,
										"eligibleHelper": true
									},
									"id": {
										"firstLine": 1,
										"firstColumn": 25,
										"lastColumn": 27,
										"lastLine": 1,
										"type": "ID",
										"original": "if",
										"parts": [
											"if"
										],
										"string": "if",
										"depth": 0,
										"idName": "if",
										"isSimple": true,
										"stringModeValue": "if"
									},
									"params": [
										{
											"firstLine": 1,
											"firstColumn": 28,
											"lastColumn": 31,
											"lastLine": 1,
											"type": "ID",
											"original": "foo",
											"parts": [
												"foo"
											],
											"string": "foo",
											"depth": 0,
											"idName": "foo",
											"isSimple": true,
											"stringModeValue": "foo"
										}
									],
									"eligibleHelper": true,
									"isHelper": true
								},
								"program": {
									"firstLine": 1,
									"firstColumn": 22,
									"lastColumn": 67,
									"lastLine": 1,
									"type": "program",
									"statements": [
										{
											"firstLine": 1,
											"firstColumn": 33,
											"lastColumn": 67,
											"lastLine": 1,
											"type": "block",
											"mustache": {
												"firstLine": 1,
												"firstColumn": 33,
												"lastColumn": 44,
												"lastLine": 1,
												"type": "mustache",
												"strip": {
													"left": false,
													"right": false
												},
												"escaped": true,
												"sexpr": {
													"firstLine": 1,
													"firstColumn": 36,
													"lastColumn": 42,
													"lastLine": 1,
													"type": "sexpr",
													"id": {
														"firstLine": 1,
														"firstColumn": 36,
														"lastColumn": 38,
														"lastLine": 1,
														"type": "ID",
														"original": "if",
														"parts": [
															"if"
														],
														"string": "if",
														"depth": 0,
														"idName": "if",
														"isSimple": true,
														"stringModeValue": "if"
													},
													"params": [
														{
															"firstLine": 1,
															"firstColumn": 39,
															"lastColumn": 42,
															"lastLine": 1,
															"type": "ID",
															"original": "foo",
															"parts": [
																"foo"
															],
															"string": "foo",
															"depth": 0,
															"idName": "foo",
															"isSimple": true,
															"stringModeValue": "foo"
														}
													],
													"isHelper": true,
													"eligibleHelper": true
												},
												"id": {
													"firstLine": 1,
													"firstColumn": 36,
													"lastColumn": 38,
													"lastLine": 1,
													"type": "ID",
													"original": "if",
													"parts": [
														"if"
													],
													"string": "if",
													"depth": 0,
													"idName": "if",
													"isSimple": true,
													"stringModeValue": "if"
												},
												"params": [
													{
														"firstLine": 1,
														"firstColumn": 39,
														"lastColumn": 42,
														"lastLine": 1,
														"type": "ID",
														"original": "foo",
														"parts": [
															"foo"
														],
														"string": "foo",
														"depth": 0,
														"idName": "foo",
														"isSimple": true,
														"stringModeValue": "foo"
													}
												],
												"eligibleHelper": true,
												"isHelper": true
											},
											"program": {
												"firstLine": 1,
												"firstColumn": 33,
												"lastColumn": 60,
												"lastLine": 1,
												"type": "program",
												"statements": [
													{
														"firstLine": 1,
														"firstColumn": 44,
														"lastColumn": 50,
														"lastLine": 1,
														"type": "content",
														"string": "Hello ",
														"original": "Hello "
													},
													{
														"firstLine": 1,
														"firstColumn": 50,
														"lastColumn": 60,
														"lastLine": 1,
														"type": "mustache",
														"strip": {
															"left": false,
															"right": false
														},
														"escaped": true,
														"sexpr": {
															"firstLine": 1,
															"firstColumn": 52,
															"lastColumn": 58,
															"lastLine": 1,
															"type": "sexpr",
															"hash": null,
															"id": {
																"firstLine": 1,
																"firstColumn": 52,
																"lastColumn": 58,
																"lastLine": 1,
																"type": "DATA",
																"id": {
																	"firstLine": 1,
																	"firstColumn": 53,
																	"lastColumn": 58,
																	"lastLine": 1,
																	"type": "ID",
																	"original": "world",
																	"parts": [
																		"world"
																	],
																	"string": "world",
																	"depth": 0,
																	"idName": "world",
																	"isSimple": true,
																	"stringModeValue": "world"
																},
																"stringModeValue": "world",
																"idName": "@world"
															},
															"params": [],
															"isHelper": false
														},
														"id": {
															"firstLine": 1,
															"firstColumn": 52,
															"lastColumn": 58,
															"lastLine": 1,
															"type": "DATA",
															"id": {
																"firstLine": 1,
																"firstColumn": 53,
																"lastColumn": 58,
																"lastLine": 1,
																"type": "ID",
																"original": "world",
																"parts": [
																	"world"
																],
																"string": "world",
																"depth": 0,
																"idName": "world",
																"isSimple": true,
																"stringModeValue": "world"
															},
															"stringModeValue": "world",
															"idName": "@world"
														},
														"params": [],
														"hash": null,
														"isHelper": false
													}
												],
												"strip": {}
											},
											"strip": {
												"left": false,
												"right": false,
												"openStandalone": false
											}
										}
									],
									"strip": {}
								},
								"strip": {
									"left": false,
									"right": false
								}
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushHash",
					"args": []
				},
				{
					"opcode": "pushString",
					"args": [
						"world"
					]
				},
				{
					"opcode": "assignToHash",
					"args": [
						"world"
					]
				},
				{
					"opcode": "popHash",
					"args": []
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"let"
						],
						true,
						null
					]
				},
				{
					"opcode": "invokeHelper",
					"args": [
						0,
						"let",
						true
					]
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"foo"
								],
								null,
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								0
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "emptyHash",
							"args": []
						},
						{
							"opcode": "invokeKnownHelper",
							"args": [
								1,
								"if"
							]
						},
						{
							"opcode": "append",
							"args": []
						}
					],
					"children": [
						{
							"opcodes": [
								{
									"opcode": "getContext",
									"args": [
										0
									]
								},
								{
									"opcode": "lookupOnContext",
									"args": [
										[
											"foo"
										],
										null,
										null
									]
								},
								{
									"opcode": "pushProgram",
									"args": [
										0
									]
								},
								{
									"opcode": "pushProgram",
									"args": [
										null
									]
								},
								{
									"opcode": "emptyHash",
									"args": []
								},
								{
									"opcode": "invokeKnownHelper",
									"args": [
										1,
										"if"
									]
								},
								{
									"opcode": "append",
									"args": []
								}
							],
							"children": [
								{
									"opcodes": [
										{
											"opcode": "appendContent",
											"args": [
												"Hello "
											]
										},
										{
											"opcode": "lookupData",
											"args": [
												0,
												[
													"world"
												]
											]
										},
										{
											"opcode": "resolvePossibleLambda",
											"args": []
										},
										{
											"opcode": "appendEscaped",
											"args": []
										}
									],
									"children": [],
									"depths": {
										"list": []
									},
									"options": {
										"data": true,
										"knownHelpers": {
											"helperMissing": true,
											"blockHelperMissing": true,
											"each": true,
											"if": true,
											"unless": true,
											"with": true,
											"log": true,
											"lookup": true
										}
									},
									"isSimple": false
								}
							],
							"depths": {
								"list": []
							},
							"options": {
								"data": true,
								"knownHelpers": {
									"helperMissing": true,
									"blockHelperMissing": true,
									"each": true,
									"if": true,
									"unless": true,
									"with": true,
									"log": true,
									"lookup": true
								}
							},
							"guid": 1,
							"isSimple": true
						}
					],
					"depths": {
						"list": []
					},
					"options": {
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"guid": 1,
					"isSimple": true
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"guid": 1,
			"isSimple": true
		}
	},
	{
		"description": "data",
		"it": "parameter data can be looked up via @foo",
		"template": "{{hello @world}}",
		"data": {
			"world": "world"
		},
		"expected": "Hello world",
		"message": "@foo as a parameter retrieves template data",
		"options": {},
		"helpers": {
			"hello": {
				"!code": true,
				"javascript": "function (noun) {\n        return \"Hello \" + noun;\n      }",
				"php": "function($noun) { return \"Hello \" . $noun; }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 16,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 16,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 14,
						"lastLine": 1,
						"type": "sexpr",
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 7,
							"lastLine": 1,
							"type": "ID",
							"original": "hello",
							"parts": [
								"hello"
							],
							"string": "hello",
							"depth": 0,
							"idName": "hello",
							"isSimple": true,
							"stringModeValue": "hello"
						},
						"params": [
							{
								"firstLine": 1,
								"firstColumn": 8,
								"lastColumn": 14,
								"lastLine": 1,
								"type": "DATA",
								"id": {
									"firstLine": 1,
									"firstColumn": 9,
									"lastColumn": 14,
									"lastLine": 1,
									"type": "ID",
									"original": "world",
									"parts": [
										"world"
									],
									"string": "world",
									"depth": 0,
									"idName": "world",
									"isSimple": true,
									"stringModeValue": "world"
								},
								"stringModeValue": "world",
								"idName": "@world"
							}
						],
						"isHelper": true,
						"eligibleHelper": true
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 7,
						"lastLine": 1,
						"type": "ID",
						"original": "hello",
						"parts": [
							"hello"
						],
						"string": "hello",
						"depth": 0,
						"idName": "hello",
						"isSimple": true,
						"stringModeValue": "hello"
					},
					"params": [
						{
							"firstLine": 1,
							"firstColumn": 8,
							"lastColumn": 14,
							"lastLine": 1,
							"type": "DATA",
							"id": {
								"firstLine": 1,
								"firstColumn": 9,
								"lastColumn": 14,
								"lastLine": 1,
								"type": "ID",
								"original": "world",
								"parts": [
									"world"
								],
								"string": "world",
								"depth": 0,
								"idName": "world",
								"isSimple": true,
								"stringModeValue": "world"
							},
							"stringModeValue": "world",
							"idName": "@world"
						}
					],
					"eligibleHelper": true,
					"isHelper": true
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "lookupData",
					"args": [
						0,
						[
							"world"
						]
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"hello"
						],
						true,
						null
					]
				},
				{
					"opcode": "invokeHelper",
					"args": [
						1,
						"hello",
						true
					]
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"isSimple": true
		}
	},
	{
		"description": "data",
		"it": "hash values can be looked up via @foo",
		"template": "{{hello noun=@world}}",
		"data": {
			"world": "world"
		},
		"expected": "Hello world",
		"message": "@foo as a parameter retrieves template data",
		"options": {},
		"helpers": {
			"hello": {
				"!code": true,
				"javascript": "function (options) {\n        return \"Hello \" + options.hash.noun;\n      }",
				"php": "function($options) { return \"Hello \" . $options['hash']['noun']; }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 21,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 21,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 19,
						"lastLine": 1,
						"type": "sexpr",
						"hash": {
							"firstLine": 1,
							"firstColumn": 8,
							"lastColumn": 19,
							"lastLine": 1,
							"type": "hash",
							"pairs": [
								[
									"noun",
									{
										"firstLine": 1,
										"firstColumn": 13,
										"lastColumn": 19,
										"lastLine": 1,
										"type": "DATA",
										"id": {
											"firstLine": 1,
											"firstColumn": 14,
											"lastColumn": 19,
											"lastLine": 1,
											"type": "ID",
											"original": "world",
											"parts": [
												"world"
											],
											"string": "world",
											"depth": 0,
											"idName": "world",
											"isSimple": true,
											"stringModeValue": "world"
										},
										"stringModeValue": "world",
										"idName": "@world"
									}
								]
							]
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 7,
							"lastLine": 1,
							"type": "ID",
							"original": "hello",
							"parts": [
								"hello"
							],
							"string": "hello",
							"depth": 0,
							"idName": "hello",
							"isSimple": true,
							"stringModeValue": "hello"
						},
						"params": [],
						"isHelper": true,
						"eligibleHelper": true
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 7,
						"lastLine": 1,
						"type": "ID",
						"original": "hello",
						"parts": [
							"hello"
						],
						"string": "hello",
						"depth": 0,
						"idName": "hello",
						"isSimple": true,
						"stringModeValue": "hello"
					},
					"params": [],
					"hash": {
						"firstLine": 1,
						"firstColumn": 8,
						"lastColumn": 19,
						"lastLine": 1,
						"type": "hash",
						"pairs": [
							[
								"noun",
								{
									"firstLine": 1,
									"firstColumn": 13,
									"lastColumn": 19,
									"lastLine": 1,
									"type": "DATA",
									"id": {
										"firstLine": 1,
										"firstColumn": 14,
										"lastColumn": 19,
										"lastLine": 1,
										"type": "ID",
										"original": "world",
										"parts": [
											"world"
										],
										"string": "world",
										"depth": 0,
										"idName": "world",
										"isSimple": true,
										"stringModeValue": "world"
									},
									"stringModeValue": "world",
									"idName": "@world"
								}
							]
						]
					},
					"eligibleHelper": true,
					"isHelper": true
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushHash",
					"args": []
				},
				{
					"opcode": "lookupData",
					"args": [
						0,
						[
							"world"
						]
					]
				},
				{
					"opcode": "assignToHash",
					"args": [
						"noun"
					]
				},
				{
					"opcode": "popHash",
					"args": []
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"hello"
						],
						true,
						null
					]
				},
				{
					"opcode": "invokeHelper",
					"args": [
						0,
						"hello",
						true
					]
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"isSimple": true
		}
	},
	{
		"description": "data",
		"it": "nested parameter data can be looked up via @foo.bar",
		"template": "{{hello @world.bar}}",
		"data": {
			"world": {
				"bar": "world"
			}
		},
		"expected": "Hello world",
		"message": "@foo as a parameter retrieves template data",
		"options": {},
		"helpers": {
			"hello": {
				"!code": true,
				"javascript": "function (noun) {\n        return \"Hello \" + noun;\n      }",
				"php": "function($noun) { return \"Hello \" . $noun; }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 20,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 20,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 18,
						"lastLine": 1,
						"type": "sexpr",
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 7,
							"lastLine": 1,
							"type": "ID",
							"original": "hello",
							"parts": [
								"hello"
							],
							"string": "hello",
							"depth": 0,
							"idName": "hello",
							"isSimple": true,
							"stringModeValue": "hello"
						},
						"params": [
							{
								"firstLine": 1,
								"firstColumn": 8,
								"lastColumn": 18,
								"lastLine": 1,
								"type": "DATA",
								"id": {
									"firstLine": 1,
									"firstColumn": 9,
									"lastColumn": 18,
									"lastLine": 1,
									"type": "ID",
									"original": "world.bar",
									"parts": [
										"world",
										"bar"
									],
									"string": "world.bar",
									"depth": 0,
									"idName": "world.bar",
									"isSimple": false,
									"stringModeValue": "world.bar"
								},
								"stringModeValue": "world.bar",
								"idName": "@world.bar"
							}
						],
						"isHelper": true,
						"eligibleHelper": true
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 7,
						"lastLine": 1,
						"type": "ID",
						"original": "hello",
						"parts": [
							"hello"
						],
						"string": "hello",
						"depth": 0,
						"idName": "hello",
						"isSimple": true,
						"stringModeValue": "hello"
					},
					"params": [
						{
							"firstLine": 1,
							"firstColumn": 8,
							"lastColumn": 18,
							"lastLine": 1,
							"type": "DATA",
							"id": {
								"firstLine": 1,
								"firstColumn": 9,
								"lastColumn": 18,
								"lastLine": 1,
								"type": "ID",
								"original": "world.bar",
								"parts": [
									"world",
									"bar"
								],
								"string": "world.bar",
								"depth": 0,
								"idName": "world.bar",
								"isSimple": false,
								"stringModeValue": "world.bar"
							},
							"stringModeValue": "world.bar",
							"idName": "@world.bar"
						}
					],
					"eligibleHelper": true,
					"isHelper": true
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "lookupData",
					"args": [
						0,
						[
							"world",
							"bar"
						]
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"hello"
						],
						true,
						null
					]
				},
				{
					"opcode": "invokeHelper",
					"args": [
						1,
						"hello",
						true
					]
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"isSimple": true
		}
	},
	{
		"description": "data",
		"it": "nested parameter data does not fail with @world.bar",
		"template": "{{hello @world.bar}}",
		"data": {
			"foo": {
				"bar": "world"
			}
		},
		"expected": "Hello undefined",
		"message": "@foo as a parameter retrieves template data",
		"options": {},
		"helpers": {
			"hello": {
				"!code": true,
				"javascript": "function (noun) {\n        return \"Hello \" + noun;\n      }",
				"php": "function($noun) { return \"Hello \" . ($noun === null ? 'undefined' : $noun); }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 20,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 20,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 18,
						"lastLine": 1,
						"type": "sexpr",
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 7,
							"lastLine": 1,
							"type": "ID",
							"original": "hello",
							"parts": [
								"hello"
							],
							"string": "hello",
							"depth": 0,
							"idName": "hello",
							"isSimple": true,
							"stringModeValue": "hello"
						},
						"params": [
							{
								"firstLine": 1,
								"firstColumn": 8,
								"lastColumn": 18,
								"lastLine": 1,
								"type": "DATA",
								"id": {
									"firstLine": 1,
									"firstColumn": 9,
									"lastColumn": 18,
									"lastLine": 1,
									"type": "ID",
									"original": "world.bar",
									"parts": [
										"world",
										"bar"
									],
									"string": "world.bar",
									"depth": 0,
									"idName": "world.bar",
									"isSimple": false,
									"stringModeValue": "world.bar"
								},
								"stringModeValue": "world.bar",
								"idName": "@world.bar"
							}
						],
						"isHelper": true,
						"eligibleHelper": true
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 7,
						"lastLine": 1,
						"type": "ID",
						"original": "hello",
						"parts": [
							"hello"
						],
						"string": "hello",
						"depth": 0,
						"idName": "hello",
						"isSimple": true,
						"stringModeValue": "hello"
					},
					"params": [
						{
							"firstLine": 1,
							"firstColumn": 8,
							"lastColumn": 18,
							"lastLine": 1,
							"type": "DATA",
							"id": {
								"firstLine": 1,
								"firstColumn": 9,
								"lastColumn": 18,
								"lastLine": 1,
								"type": "ID",
								"original": "world.bar",
								"parts": [
									"world",
									"bar"
								],
								"string": "world.bar",
								"depth": 0,
								"idName": "world.bar",
								"isSimple": false,
								"stringModeValue": "world.bar"
							},
							"stringModeValue": "world.bar",
							"idName": "@world.bar"
						}
					],
					"eligibleHelper": true,
					"isHelper": true
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "lookupData",
					"args": [
						0,
						[
							"world",
							"bar"
						]
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"hello"
						],
						true,
						null
					]
				},
				{
					"opcode": "invokeHelper",
					"args": [
						1,
						"hello",
						true
					]
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"isSimple": true
		}
	},
	{
		"description": "data",
		"it": "data is inherited downstream",
		"template": "{{#let foo=1 bar=2}}{{#let foo=bar.baz}}{{@bar}}{{@foo}}{{/let}}{{@foo}}{{/let}}",
		"data": {
			"bar": {
				"baz": "hello world"
			}
		},
		"expected": "2hello world1",
		"message": "data variables are inherited downstream",
		"options": {},
		"compileOptions": {
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"let": {
				"!code": true,
				"javascript": "function (options) {\n        var frame = Handlebars.createFrame(options.data);\n        for (var prop in options.hash) {\n          frame[prop] = options.hash[prop];\n        }\n        return options.fn(this, {data: frame});\n      }",
				"php": "function($options) {\n        $frame = $options['data'];\n        foreach( $options['hash'] as $prop => $v ) {\n          $frame[$prop] = $options['hash'][$prop];\n        }\n        return $options->fn($options->scope, array(\"data\" => $frame));\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 80,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 80,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 20,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 18,
							"lastLine": 1,
							"type": "sexpr",
							"hash": {
								"firstLine": 1,
								"firstColumn": 7,
								"lastColumn": 18,
								"lastLine": 1,
								"type": "hash",
								"pairs": [
									[
										"foo",
										{
											"firstLine": 1,
											"firstColumn": 11,
											"lastColumn": 12,
											"lastLine": 1,
											"type": "NUMBER",
											"number": "1",
											"original": "1",
											"stringModeValue": 1
										}
									],
									[
										"bar",
										{
											"firstLine": 1,
											"firstColumn": 17,
											"lastColumn": 18,
											"lastLine": 1,
											"type": "NUMBER",
											"number": "2",
											"original": "2",
											"stringModeValue": 2
										}
									]
								]
							},
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 6,
								"lastLine": 1,
								"type": "ID",
								"original": "let",
								"parts": [
									"let"
								],
								"string": "let",
								"depth": 0,
								"idName": "let",
								"isSimple": true,
								"stringModeValue": "let"
							},
							"params": [],
							"isHelper": true,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 6,
							"lastLine": 1,
							"type": "ID",
							"original": "let",
							"parts": [
								"let"
							],
							"string": "let",
							"depth": 0,
							"idName": "let",
							"isSimple": true,
							"stringModeValue": "let"
						},
						"params": [],
						"hash": {
							"firstLine": 1,
							"firstColumn": 7,
							"lastColumn": 18,
							"lastLine": 1,
							"type": "hash",
							"pairs": [
								[
									"foo",
									{
										"firstLine": 1,
										"firstColumn": 11,
										"lastColumn": 12,
										"lastLine": 1,
										"type": "NUMBER",
										"number": "1",
										"original": "1",
										"stringModeValue": 1
									}
								],
								[
									"bar",
									{
										"firstLine": 1,
										"firstColumn": 17,
										"lastColumn": 18,
										"lastLine": 1,
										"type": "NUMBER",
										"number": "2",
										"original": "2",
										"stringModeValue": 2
									}
								]
							]
						},
						"eligibleHelper": true,
						"isHelper": true
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 72,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 20,
								"lastColumn": 64,
								"lastLine": 1,
								"type": "block",
								"mustache": {
									"firstLine": 1,
									"firstColumn": 20,
									"lastColumn": 40,
									"lastLine": 1,
									"type": "mustache",
									"strip": {
										"left": false,
										"right": false
									},
									"escaped": true,
									"sexpr": {
										"firstLine": 1,
										"firstColumn": 23,
										"lastColumn": 38,
										"lastLine": 1,
										"type": "sexpr",
										"hash": {
											"firstLine": 1,
											"firstColumn": 27,
											"lastColumn": 38,
											"lastLine": 1,
											"type": "hash",
											"pairs": [
												[
													"foo",
													{
														"firstLine": 1,
														"firstColumn": 31,
														"lastColumn": 38,
														"lastLine": 1,
														"type": "ID",
														"original": "bar.baz",
														"parts": [
															"bar",
															"baz"
														],
														"string": "bar.baz",
														"depth": 0,
														"idName": "bar.baz",
														"isSimple": false,
														"stringModeValue": "bar.baz"
													}
												]
											]
										},
										"id": {
											"firstLine": 1,
											"firstColumn": 23,
											"lastColumn": 26,
											"lastLine": 1,
											"type": "ID",
											"original": "let",
											"parts": [
												"let"
											],
											"string": "let",
											"depth": 0,
											"idName": "let",
											"isSimple": true,
											"stringModeValue": "let"
										},
										"params": [],
										"isHelper": true,
										"eligibleHelper": true
									},
									"id": {
										"firstLine": 1,
										"firstColumn": 23,
										"lastColumn": 26,
										"lastLine": 1,
										"type": "ID",
										"original": "let",
										"parts": [
											"let"
										],
										"string": "let",
										"depth": 0,
										"idName": "let",
										"isSimple": true,
										"stringModeValue": "let"
									},
									"params": [],
									"hash": {
										"firstLine": 1,
										"firstColumn": 27,
										"lastColumn": 38,
										"lastLine": 1,
										"type": "hash",
										"pairs": [
											[
												"foo",
												{
													"firstLine": 1,
													"firstColumn": 31,
													"lastColumn": 38,
													"lastLine": 1,
													"type": "ID",
													"original": "bar.baz",
													"parts": [
														"bar",
														"baz"
													],
													"string": "bar.baz",
													"depth": 0,
													"idName": "bar.baz",
													"isSimple": false,
													"stringModeValue": "bar.baz"
												}
											]
										]
									},
									"eligibleHelper": true,
									"isHelper": true
								},
								"program": {
									"firstLine": 1,
									"firstColumn": 20,
									"lastColumn": 56,
									"lastLine": 1,
									"type": "program",
									"statements": [
										{
											"firstLine": 1,
											"firstColumn": 40,
											"lastColumn": 48,
											"lastLine": 1,
											"type": "mustache",
											"strip": {
												"left": false,
												"right": false
											},
											"escaped": true,
											"sexpr": {
												"firstLine": 1,
												"firstColumn": 42,
												"lastColumn": 46,
												"lastLine": 1,
												"type": "sexpr",
												"hash": null,
												"id": {
													"firstLine": 1,
													"firstColumn": 42,
													"lastColumn": 46,
													"lastLine": 1,
													"type": "DATA",
													"id": {
														"firstLine": 1,
														"firstColumn": 43,
														"lastColumn": 46,
														"lastLine": 1,
														"type": "ID",
														"original": "bar",
														"parts": [
															"bar"
														],
														"string": "bar",
														"depth": 0,
														"idName": "bar",
														"isSimple": true,
														"stringModeValue": "bar"
													},
													"stringModeValue": "bar",
													"idName": "@bar"
												},
												"params": [],
												"isHelper": false
											},
											"id": {
												"firstLine": 1,
												"firstColumn": 42,
												"lastColumn": 46,
												"lastLine": 1,
												"type": "DATA",
												"id": {
													"firstLine": 1,
													"firstColumn": 43,
													"lastColumn": 46,
													"lastLine": 1,
													"type": "ID",
													"original": "bar",
													"parts": [
														"bar"
													],
													"string": "bar",
													"depth": 0,
													"idName": "bar",
													"isSimple": true,
													"stringModeValue": "bar"
												},
												"stringModeValue": "bar",
												"idName": "@bar"
											},
											"params": [],
											"hash": null,
											"isHelper": false
										},
										{
											"firstLine": 1,
											"firstColumn": 48,
											"lastColumn": 56,
											"lastLine": 1,
											"type": "mustache",
											"strip": {
												"left": false,
												"right": false
											},
											"escaped": true,
											"sexpr": {
												"firstLine": 1,
												"firstColumn": 50,
												"lastColumn": 54,
												"lastLine": 1,
												"type": "sexpr",
												"hash": null,
												"id": {
													"firstLine": 1,
													"firstColumn": 50,
													"lastColumn": 54,
													"lastLine": 1,
													"type": "DATA",
													"id": {
														"firstLine": 1,
														"firstColumn": 51,
														"lastColumn": 54,
														"lastLine": 1,
														"type": "ID",
														"original": "foo",
														"parts": [
															"foo"
														],
														"string": "foo",
														"depth": 0,
														"idName": "foo",
														"isSimple": true,
														"stringModeValue": "foo"
													},
													"stringModeValue": "foo",
													"idName": "@foo"
												},
												"params": [],
												"isHelper": false
											},
											"id": {
												"firstLine": 1,
												"firstColumn": 50,
												"lastColumn": 54,
												"lastLine": 1,
												"type": "DATA",
												"id": {
													"firstLine": 1,
													"firstColumn": 51,
													"lastColumn": 54,
													"lastLine": 1,
													"type": "ID",
													"original": "foo",
													"parts": [
														"foo"
													],
													"string": "foo",
													"depth": 0,
													"idName": "foo",
													"isSimple": true,
													"stringModeValue": "foo"
												},
												"stringModeValue": "foo",
												"idName": "@foo"
											},
											"params": [],
											"hash": null,
											"isHelper": false
										}
									],
									"strip": {}
								},
								"strip": {
									"left": false,
									"right": false
								}
							},
							{
								"firstLine": 1,
								"firstColumn": 64,
								"lastColumn": 72,
								"lastLine": 1,
								"type": "mustache",
								"strip": {
									"left": false,
									"right": false
								},
								"escaped": true,
								"sexpr": {
									"firstLine": 1,
									"firstColumn": 66,
									"lastColumn": 70,
									"lastLine": 1,
									"type": "sexpr",
									"hash": null,
									"id": {
										"firstLine": 1,
										"firstColumn": 66,
										"lastColumn": 70,
										"lastLine": 1,
										"type": "DATA",
										"id": {
											"firstLine": 1,
											"firstColumn": 67,
											"lastColumn": 70,
											"lastLine": 1,
											"type": "ID",
											"original": "foo",
											"parts": [
												"foo"
											],
											"string": "foo",
											"depth": 0,
											"idName": "foo",
											"isSimple": true,
											"stringModeValue": "foo"
										},
										"stringModeValue": "foo",
										"idName": "@foo"
									},
									"params": [],
									"isHelper": false
								},
								"id": {
									"firstLine": 1,
									"firstColumn": 66,
									"lastColumn": 70,
									"lastLine": 1,
									"type": "DATA",
									"id": {
										"firstLine": 1,
										"firstColumn": 67,
										"lastColumn": 70,
										"lastLine": 1,
										"type": "ID",
										"original": "foo",
										"parts": [
											"foo"
										],
										"string": "foo",
										"depth": 0,
										"idName": "foo",
										"isSimple": true,
										"stringModeValue": "foo"
									},
									"stringModeValue": "foo",
									"idName": "@foo"
								},
								"params": [],
								"hash": null,
								"isHelper": false
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushHash",
					"args": []
				},
				{
					"opcode": "pushLiteral",
					"args": [
						"1"
					]
				},
				{
					"opcode": "pushLiteral",
					"args": [
						"2"
					]
				},
				{
					"opcode": "assignToHash",
					"args": [
						"bar"
					]
				},
				{
					"opcode": "assignToHash",
					"args": [
						"foo"
					]
				},
				{
					"opcode": "popHash",
					"args": []
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"let"
						],
						true,
						null
					]
				},
				{
					"opcode": "invokeHelper",
					"args": [
						0,
						"let",
						true
					]
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "pushProgram",
							"args": [
								0
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "pushHash",
							"args": []
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"bar",
									"baz"
								],
								null,
								null
							]
						},
						{
							"opcode": "assignToHash",
							"args": [
								"foo"
							]
						},
						{
							"opcode": "popHash",
							"args": []
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"let"
								],
								true,
								null
							]
						},
						{
							"opcode": "invokeHelper",
							"args": [
								0,
								"let",
								true
							]
						},
						{
							"opcode": "append",
							"args": []
						},
						{
							"opcode": "lookupData",
							"args": [
								0,
								[
									"foo"
								]
							]
						},
						{
							"opcode": "resolvePossibleLambda",
							"args": []
						},
						{
							"opcode": "appendEscaped",
							"args": []
						}
					],
					"children": [
						{
							"opcodes": [
								{
									"opcode": "lookupData",
									"args": [
										0,
										[
											"bar"
										]
									]
								},
								{
									"opcode": "resolvePossibleLambda",
									"args": []
								},
								{
									"opcode": "appendEscaped",
									"args": []
								},
								{
									"opcode": "lookupData",
									"args": [
										0,
										[
											"foo"
										]
									]
								},
								{
									"opcode": "resolvePossibleLambda",
									"args": []
								},
								{
									"opcode": "appendEscaped",
									"args": []
								}
							],
							"children": [],
							"depths": {
								"list": []
							},
							"options": {
								"data": true,
								"knownHelpers": {
									"helperMissing": true,
									"blockHelperMissing": true,
									"each": true,
									"if": true,
									"unless": true,
									"with": true,
									"log": true,
									"lookup": true
								}
							},
							"isSimple": false
						}
					],
					"depths": {
						"list": []
					},
					"options": {
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"guid": 1,
					"isSimple": false
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"guid": 1,
			"isSimple": true
		}
	},
	{
		"description": "data",
		"it": "passing in data to a compiled function that expects data - works with helpers in partials",
		"template": "{{hello}}",
		"data": {
			"noun": "cat",
			"adjective": "happy",
			"_parent": {
				"adjective": "happy"
			}
		},
		"expected": "happy cat",
		"message": "Data output by helper inside partial",
		"options": {},
		"compileOptions": {
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"hello": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data.adjective + \" \"  + this.noun;\n      }",
				"php": "function($options) {\n        return $options['data']['adjective'] . \" \"  . $options->scope['noun'];\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 9,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 9,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 7,
						"lastLine": 1,
						"type": "sexpr",
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 7,
							"lastLine": 1,
							"type": "ID",
							"original": "hello",
							"parts": [
								"hello"
							],
							"string": "hello",
							"depth": 0,
							"idName": "hello",
							"isSimple": true,
							"stringModeValue": "hello"
						},
						"params": [],
						"isHelper": false,
						"eligibleHelper": true
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 7,
						"lastLine": 1,
						"type": "ID",
						"original": "hello",
						"parts": [
							"hello"
						],
						"string": "hello",
						"depth": 0,
						"idName": "hello",
						"isSimple": true,
						"stringModeValue": "hello"
					},
					"params": [],
					"eligibleHelper": true,
					"isHelper": false
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"hello"
						],
						null,
						null
					]
				},
				{
					"opcode": "invokeAmbiguous",
					"args": [
						"hello",
						false
					]
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"isSimple": true
		}
	},
	{
		"description": "data",
		"it": "passing in data to a compiled function that expects data - works with helpers and parameters",
		"template": "{{hello world}}",
		"data": {
			"exclaim": true,
			"world": "world",
			"adjective": "happy"
		},
		"expected": "happy world!",
		"message": "Data output by helper",
		"options": {},
		"compileOptions": {
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"hello": {
				"!code": true,
				"javascript": "function (noun, options) {\n        return options.data.adjective + \" \"  + noun + (this.exclaim ? \"!\" : \"\");\n      }",
				"php": "function($noun, $options) {\n        return $options['data']['adjective'] . \" \"  . $noun . ($options->scope['exclaim'] ? \"!\" : \"\");\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 15,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 15,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 13,
						"lastLine": 1,
						"type": "sexpr",
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 7,
							"lastLine": 1,
							"type": "ID",
							"original": "hello",
							"parts": [
								"hello"
							],
							"string": "hello",
							"depth": 0,
							"idName": "hello",
							"isSimple": true,
							"stringModeValue": "hello"
						},
						"params": [
							{
								"firstLine": 1,
								"firstColumn": 8,
								"lastColumn": 13,
								"lastLine": 1,
								"type": "ID",
								"original": "world",
								"parts": [
									"world"
								],
								"string": "world",
								"depth": 0,
								"idName": "world",
								"isSimple": true,
								"stringModeValue": "world"
							}
						],
						"isHelper": true,
						"eligibleHelper": true
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 7,
						"lastLine": 1,
						"type": "ID",
						"original": "hello",
						"parts": [
							"hello"
						],
						"string": "hello",
						"depth": 0,
						"idName": "hello",
						"isSimple": true,
						"stringModeValue": "hello"
					},
					"params": [
						{
							"firstLine": 1,
							"firstColumn": 8,
							"lastColumn": 13,
							"lastLine": 1,
							"type": "ID",
							"original": "world",
							"parts": [
								"world"
							],
							"string": "world",
							"depth": 0,
							"idName": "world",
							"isSimple": true,
							"stringModeValue": "world"
						}
					],
					"eligibleHelper": true,
					"isHelper": true
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"world"
						],
						null,
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"hello"
						],
						true,
						null
					]
				},
				{
					"opcode": "invokeHelper",
					"args": [
						1,
						"hello",
						true
					]
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"isSimple": true
		}
	},
	{
		"description": "data",
		"it": "passing in data to a compiled function that expects data - works with block helpers",
		"template": "{{#hello}}{{world}}{{/hello}}",
		"data": {
			"exclaim": true,
			"adjective": "happy"
		},
		"expected": "happy world!",
		"message": "Data output by helper",
		"options": {},
		"compileOptions": {
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"hello": {
				"!code": true,
				"javascript": "function (options) {\n        return options.fn(this);\n      }",
				"php": "function($options) {\n        return $options->fn($options->scope);\n      }"
			},
			"world": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data.adjective + \" world\" + (this.exclaim ? \"!\" : \"\");\n      }",
				"php": "function($options) {\n        return $options['data']['adjective'] . \" world\" . ($options->scope['exclaim'] ? \"!\" : \"\");\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 29,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 29,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 10,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "sexpr",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 8,
								"lastLine": 1,
								"type": "ID",
								"original": "hello",
								"parts": [
									"hello"
								],
								"string": "hello",
								"depth": 0,
								"idName": "hello",
								"isSimple": true,
								"stringModeValue": "hello"
							},
							"params": [],
							"isHelper": false,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "ID",
							"original": "hello",
							"parts": [
								"hello"
							],
							"string": "hello",
							"depth": 0,
							"idName": "hello",
							"isSimple": true,
							"stringModeValue": "hello"
						},
						"params": [],
						"eligibleHelper": true,
						"isHelper": false
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 19,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 10,
								"lastColumn": 19,
								"lastLine": 1,
								"type": "mustache",
								"strip": {
									"left": false,
									"right": false
								},
								"escaped": true,
								"sexpr": {
									"firstLine": 1,
									"firstColumn": 12,
									"lastColumn": 17,
									"lastLine": 1,
									"type": "sexpr",
									"id": {
										"firstLine": 1,
										"firstColumn": 12,
										"lastColumn": 17,
										"lastLine": 1,
										"type": "ID",
										"original": "world",
										"parts": [
											"world"
										],
										"string": "world",
										"depth": 0,
										"idName": "world",
										"isSimple": true,
										"stringModeValue": "world"
									},
									"params": [],
									"isHelper": false,
									"eligibleHelper": true
								},
								"id": {
									"firstLine": 1,
									"firstColumn": 12,
									"lastColumn": 17,
									"lastLine": 1,
									"type": "ID",
									"original": "world",
									"parts": [
										"world"
									],
									"string": "world",
									"depth": 0,
									"idName": "world",
									"isSimple": true,
									"stringModeValue": "world"
								},
								"params": [],
								"eligibleHelper": true,
								"isHelper": false
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"hello"
						],
						null,
						null
					]
				},
				{
					"opcode": "invokeAmbiguous",
					"args": [
						"hello",
						true
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "ambiguousBlockValue",
					"args": []
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"world"
								],
								null,
								null
							]
						},
						{
							"opcode": "invokeAmbiguous",
							"args": [
								"world",
								false
							]
						},
						{
							"opcode": "appendEscaped",
							"args": []
						}
					],
					"children": [],
					"depths": {
						"list": []
					},
					"options": {
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"isSimple": true
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"guid": 1,
			"isSimple": true
		}
	},
	{
		"description": "data",
		"it": "passing in data to a compiled function that expects data - works with block helpers that use ..",
		"template": "{{#hello}}{{world ../zomg}}{{/hello}}",
		"data": {
			"exclaim": true,
			"zomg": "world",
			"adjective": "happy"
		},
		"expected": "happy world?",
		"message": "Data output by helper",
		"options": {},
		"compileOptions": {
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"hello": {
				"!code": true,
				"javascript": "function (options) {\n        return options.fn({exclaim: \"?\"});\n      }",
				"php": "function($options) {\n        return $options->fn(array(\"exclaim\" => \"?\"));\n      }"
			},
			"world": {
				"!code": true,
				"javascript": "function (thing, options) {\n        return options.data.adjective + \" \" + thing + (this.exclaim || \"\");\n      }",
				"php": "function($thing, $options) {\n        return $options['data']['adjective'] . \" \" . $thing . ($options->scope['exclaim'] ?: \"\");\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 37,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 37,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 10,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "sexpr",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 8,
								"lastLine": 1,
								"type": "ID",
								"original": "hello",
								"parts": [
									"hello"
								],
								"string": "hello",
								"depth": 0,
								"idName": "hello",
								"isSimple": true,
								"stringModeValue": "hello"
							},
							"params": [],
							"isHelper": false,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "ID",
							"original": "hello",
							"parts": [
								"hello"
							],
							"string": "hello",
							"depth": 0,
							"idName": "hello",
							"isSimple": true,
							"stringModeValue": "hello"
						},
						"params": [],
						"eligibleHelper": true,
						"isHelper": false
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 27,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 10,
								"lastColumn": 27,
								"lastLine": 1,
								"type": "mustache",
								"strip": {
									"left": false,
									"right": false
								},
								"escaped": true,
								"sexpr": {
									"firstLine": 1,
									"firstColumn": 12,
									"lastColumn": 25,
									"lastLine": 1,
									"type": "sexpr",
									"id": {
										"firstLine": 1,
										"firstColumn": 12,
										"lastColumn": 17,
										"lastLine": 1,
										"type": "ID",
										"original": "world",
										"parts": [
											"world"
										],
										"string": "world",
										"depth": 0,
										"idName": "world",
										"isSimple": true,
										"stringModeValue": "world"
									},
									"params": [
										{
											"firstLine": 1,
											"firstColumn": 18,
											"lastColumn": 25,
											"lastLine": 1,
											"type": "ID",
											"original": "../zomg",
											"parts": [
												"zomg"
											],
											"string": "zomg",
											"depth": 1,
											"idName": "../zomg",
											"isSimple": false,
											"stringModeValue": "zomg"
										}
									],
									"isHelper": true,
									"eligibleHelper": true
								},
								"id": {
									"firstLine": 1,
									"firstColumn": 12,
									"lastColumn": 17,
									"lastLine": 1,
									"type": "ID",
									"original": "world",
									"parts": [
										"world"
									],
									"string": "world",
									"depth": 0,
									"idName": "world",
									"isSimple": true,
									"stringModeValue": "world"
								},
								"params": [
									{
										"firstLine": 1,
										"firstColumn": 18,
										"lastColumn": 25,
										"lastLine": 1,
										"type": "ID",
										"original": "../zomg",
										"parts": [
											"zomg"
										],
										"string": "zomg",
										"depth": 1,
										"idName": "../zomg",
										"isSimple": false,
										"stringModeValue": "zomg"
									}
								],
								"eligibleHelper": true,
								"isHelper": true
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"hello"
						],
						null,
						null
					]
				},
				{
					"opcode": "invokeAmbiguous",
					"args": [
						"hello",
						true
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "ambiguousBlockValue",
					"args": []
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "getContext",
							"args": [
								1
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"zomg"
								],
								null,
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "emptyHash",
							"args": []
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"world"
								],
								true,
								null
							]
						},
						{
							"opcode": "invokeHelper",
							"args": [
								1,
								"world",
								true
							]
						},
						{
							"opcode": "appendEscaped",
							"args": []
						}
					],
					"children": [],
					"depths": {
						"1": true,
						"list": [
							1
						]
					},
					"options": {
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"isSimple": true
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"guid": 1,
			"isSimple": true
		}
	},
	{
		"description": "data",
		"it": "passing in data to a compiled function that expects data - data is passed to with block helpers where children use ..",
		"template": "{{#hello}}{{world ../zomg}}{{/hello}}",
		"data": {
			"exclaim": true,
			"zomg": "world",
			"adjective": "happy",
			"accessData": "#win"
		},
		"expected": "#win happy world?",
		"message": "Data output by helper",
		"options": {},
		"compileOptions": {
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"hello": {
				"!code": true,
				"javascript": "function (options) {\n        return options.data.accessData + \" \" + options.fn({exclaim: \"?\"});\n      }",
				"php": "function($options) {\n        return $options['data']['accessData'] . \" \" . $options->fn(array(\"exclaim\" => \"?\"));\n      }"
			},
			"world": {
				"!code": true,
				"javascript": "function (thing, options) {\n        return options.data.adjective + \" \" + thing + (this.exclaim || \"\");\n      }",
				"php": "function($thing, $options) {\n        return $options['data']['adjective'] . \" \" . $thing . ($options->scope['exclaim'] ?: \"\");\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 37,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 37,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 10,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "sexpr",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 8,
								"lastLine": 1,
								"type": "ID",
								"original": "hello",
								"parts": [
									"hello"
								],
								"string": "hello",
								"depth": 0,
								"idName": "hello",
								"isSimple": true,
								"stringModeValue": "hello"
							},
							"params": [],
							"isHelper": false,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "ID",
							"original": "hello",
							"parts": [
								"hello"
							],
							"string": "hello",
							"depth": 0,
							"idName": "hello",
							"isSimple": true,
							"stringModeValue": "hello"
						},
						"params": [],
						"eligibleHelper": true,
						"isHelper": false
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 27,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 10,
								"lastColumn": 27,
								"lastLine": 1,
								"type": "mustache",
								"strip": {
									"left": false,
									"right": false
								},
								"escaped": true,
								"sexpr": {
									"firstLine": 1,
									"firstColumn": 12,
									"lastColumn": 25,
									"lastLine": 1,
									"type": "sexpr",
									"id": {
										"firstLine": 1,
										"firstColumn": 12,
										"lastColumn": 17,
										"lastLine": 1,
										"type": "ID",
										"original": "world",
										"parts": [
											"world"
										],
										"string": "world",
										"depth": 0,
										"idName": "world",
										"isSimple": true,
										"stringModeValue": "world"
									},
									"params": [
										{
											"firstLine": 1,
											"firstColumn": 18,
											"lastColumn": 25,
											"lastLine": 1,
											"type": "ID",
											"original": "../zomg",
											"parts": [
												"zomg"
											],
											"string": "zomg",
											"depth": 1,
											"idName": "../zomg",
											"isSimple": false,
											"stringModeValue": "zomg"
										}
									],
									"isHelper": true,
									"eligibleHelper": true
								},
								"id": {
									"firstLine": 1,
									"firstColumn": 12,
									"lastColumn": 17,
									"lastLine": 1,
									"type": "ID",
									"original": "world",
									"parts": [
										"world"
									],
									"string": "world",
									"depth": 0,
									"idName": "world",
									"isSimple": true,
									"stringModeValue": "world"
								},
								"params": [
									{
										"firstLine": 1,
										"firstColumn": 18,
										"lastColumn": 25,
										"lastLine": 1,
										"type": "ID",
										"original": "../zomg",
										"parts": [
											"zomg"
										],
										"string": "zomg",
										"depth": 1,
										"idName": "../zomg",
										"isSimple": false,
										"stringModeValue": "zomg"
									}
								],
								"eligibleHelper": true,
								"isHelper": true
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"hello"
						],
						null,
						null
					]
				},
				{
					"opcode": "invokeAmbiguous",
					"args": [
						"hello",
						true
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "ambiguousBlockValue",
					"args": []
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "getContext",
							"args": [
								1
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"zomg"
								],
								null,
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "emptyHash",
							"args": []
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"world"
								],
								true,
								null
							]
						},
						{
							"opcode": "invokeHelper",
							"args": [
								1,
								"world",
								true
							]
						},
						{
							"opcode": "appendEscaped",
							"args": []
						}
					],
					"children": [],
					"depths": {
						"1": true,
						"list": [
							1
						]
					},
					"options": {
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"isSimple": true
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"guid": 1,
			"isSimple": true
		}
	},
	{
		"description": "data",
		"it": "you can override inherited data when invoking a helper",
		"template": "{{#hello}}{{world zomg}}{{/hello}}",
		"data": {
			"exclaim": true,
			"zomg": "planet",
			"adjective": "happy"
		},
		"expected": "sad world?",
		"message": "Overriden data output by helper",
		"options": {},
		"compileOptions": {
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"hello": {
				"!code": true,
				"javascript": "function (options) {\n        return options.fn({exclaim: \"?\", zomg: \"world\"}, { data: {adjective: \"sad\"} });\n      }",
				"php": "function($options) {\n        return $options->fn(array(\"exclaim\" => \"?\", \"zomg\" => \"world\"), array(\"data\" => array(\"adjective\" => \"sad\")));\n      }"
			},
			"world": {
				"!code": true,
				"javascript": "function (thing, options) {\n        return options.data.adjective + \" \" + thing + (this.exclaim || \"\");\n      }",
				"php": "function($thing, $options) {\n        return $options['data']['adjective'] . \" \" . $thing . ($options->scope['exclaim'] ?: \"\");\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 34,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 34,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 10,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "sexpr",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 8,
								"lastLine": 1,
								"type": "ID",
								"original": "hello",
								"parts": [
									"hello"
								],
								"string": "hello",
								"depth": 0,
								"idName": "hello",
								"isSimple": true,
								"stringModeValue": "hello"
							},
							"params": [],
							"isHelper": false,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "ID",
							"original": "hello",
							"parts": [
								"hello"
							],
							"string": "hello",
							"depth": 0,
							"idName": "hello",
							"isSimple": true,
							"stringModeValue": "hello"
						},
						"params": [],
						"eligibleHelper": true,
						"isHelper": false
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 24,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 10,
								"lastColumn": 24,
								"lastLine": 1,
								"type": "mustache",
								"strip": {
									"left": false,
									"right": false
								},
								"escaped": true,
								"sexpr": {
									"firstLine": 1,
									"firstColumn": 12,
									"lastColumn": 22,
									"lastLine": 1,
									"type": "sexpr",
									"id": {
										"firstLine": 1,
										"firstColumn": 12,
										"lastColumn": 17,
										"lastLine": 1,
										"type": "ID",
										"original": "world",
										"parts": [
											"world"
										],
										"string": "world",
										"depth": 0,
										"idName": "world",
										"isSimple": true,
										"stringModeValue": "world"
									},
									"params": [
										{
											"firstLine": 1,
											"firstColumn": 18,
											"lastColumn": 22,
											"lastLine": 1,
											"type": "ID",
											"original": "zomg",
											"parts": [
												"zomg"
											],
											"string": "zomg",
											"depth": 0,
											"idName": "zomg",
											"isSimple": true,
											"stringModeValue": "zomg"
										}
									],
									"isHelper": true,
									"eligibleHelper": true
								},
								"id": {
									"firstLine": 1,
									"firstColumn": 12,
									"lastColumn": 17,
									"lastLine": 1,
									"type": "ID",
									"original": "world",
									"parts": [
										"world"
									],
									"string": "world",
									"depth": 0,
									"idName": "world",
									"isSimple": true,
									"stringModeValue": "world"
								},
								"params": [
									{
										"firstLine": 1,
										"firstColumn": 18,
										"lastColumn": 22,
										"lastLine": 1,
										"type": "ID",
										"original": "zomg",
										"parts": [
											"zomg"
										],
										"string": "zomg",
										"depth": 0,
										"idName": "zomg",
										"isSimple": true,
										"stringModeValue": "zomg"
									}
								],
								"eligibleHelper": true,
								"isHelper": true
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"hello"
						],
						null,
						null
					]
				},
				{
					"opcode": "invokeAmbiguous",
					"args": [
						"hello",
						true
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "ambiguousBlockValue",
					"args": []
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"zomg"
								],
								null,
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "emptyHash",
							"args": []
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"world"
								],
								true,
								null
							]
						},
						{
							"opcode": "invokeHelper",
							"args": [
								1,
								"world",
								true
							]
						},
						{
							"opcode": "appendEscaped",
							"args": []
						}
					],
					"children": [],
					"depths": {
						"list": []
					},
					"options": {
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"isSimple": true
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"guid": 1,
			"isSimple": true
		}
	},
	{
		"description": "data",
		"it": "you can override inherited data when invoking a helper with depth",
		"template": "{{#hello}}{{world ../zomg}}{{/hello}}",
		"data": {
			"exclaim": true,
			"zomg": "world",
			"adjective": "happy"
		},
		"expected": "sad world?",
		"message": "Overriden data output by helper",
		"options": {},
		"compileOptions": {
			"data": true,
			"knownHelpers": {
				"helperMissing": true,
				"blockHelperMissing": true,
				"each": true,
				"if": true,
				"unless": true,
				"with": true,
				"log": true,
				"lookup": true
			}
		},
		"helpers": {
			"hello": {
				"!code": true,
				"javascript": "function (options) {\n        return options.fn({exclaim: \"?\"}, { data: {adjective: \"sad\"} });\n      }",
				"php": "function($options) {\n        return $options->fn(array(\"exclaim\" => \"?\"), array(\"data\" => array(\"adjective\" => \"sad\")));\n      }"
			},
			"world": {
				"!code": true,
				"javascript": "function (thing, options) {\n        return options.data.adjective + \" \" + thing + (this.exclaim || \"\");\n      }",
				"php": "function($thing, $options) {\n        return $options['data']['adjective'] . \" \" . $thing . ($options->scope['exclaim'] ?: \"\");\n      }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 37,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 37,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 10,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "sexpr",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 8,
								"lastLine": 1,
								"type": "ID",
								"original": "hello",
								"parts": [
									"hello"
								],
								"string": "hello",
								"depth": 0,
								"idName": "hello",
								"isSimple": true,
								"stringModeValue": "hello"
							},
							"params": [],
							"isHelper": false,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 8,
							"lastLine": 1,
							"type": "ID",
							"original": "hello",
							"parts": [
								"hello"
							],
							"string": "hello",
							"depth": 0,
							"idName": "hello",
							"isSimple": true,
							"stringModeValue": "hello"
						},
						"params": [],
						"eligibleHelper": true,
						"isHelper": false
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 27,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 10,
								"lastColumn": 27,
								"lastLine": 1,
								"type": "mustache",
								"strip": {
									"left": false,
									"right": false
								},
								"escaped": true,
								"sexpr": {
									"firstLine": 1,
									"firstColumn": 12,
									"lastColumn": 25,
									"lastLine": 1,
									"type": "sexpr",
									"id": {
										"firstLine": 1,
										"firstColumn": 12,
										"lastColumn": 17,
										"lastLine": 1,
										"type": "ID",
										"original": "world",
										"parts": [
											"world"
										],
										"string": "world",
										"depth": 0,
										"idName": "world",
										"isSimple": true,
										"stringModeValue": "world"
									},
									"params": [
										{
											"firstLine": 1,
											"firstColumn": 18,
											"lastColumn": 25,
											"lastLine": 1,
											"type": "ID",
											"original": "../zomg",
											"parts": [
												"zomg"
											],
											"string": "zomg",
											"depth": 1,
											"idName": "../zomg",
											"isSimple": false,
											"stringModeValue": "zomg"
										}
									],
									"isHelper": true,
									"eligibleHelper": true
								},
								"id": {
									"firstLine": 1,
									"firstColumn": 12,
									"lastColumn": 17,
									"lastLine": 1,
									"type": "ID",
									"original": "world",
									"parts": [
										"world"
									],
									"string": "world",
									"depth": 0,
									"idName": "world",
									"isSimple": true,
									"stringModeValue": "world"
								},
								"params": [
									{
										"firstLine": 1,
										"firstColumn": 18,
										"lastColumn": 25,
										"lastLine": 1,
										"type": "ID",
										"original": "../zomg",
										"parts": [
											"zomg"
										],
										"string": "zomg",
										"depth": 1,
										"idName": "../zomg",
										"isSimple": false,
										"stringModeValue": "zomg"
									}
								],
								"eligibleHelper": true,
								"isHelper": true
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"hello"
						],
						null,
						null
					]
				},
				{
					"opcode": "invokeAmbiguous",
					"args": [
						"hello",
						true
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "ambiguousBlockValue",
					"args": []
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "getContext",
							"args": [
								1
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"zomg"
								],
								null,
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "emptyHash",
							"args": []
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"world"
								],
								true,
								null
							]
						},
						{
							"opcode": "invokeHelper",
							"args": [
								1,
								"world",
								true
							]
						},
						{
							"opcode": "appendEscaped",
							"args": []
						}
					],
					"children": [],
					"depths": {
						"1": true,
						"list": [
							1
						]
					},
					"options": {
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"isSimple": true
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"guid": 1,
			"isSimple": true
		}
	},
	{
		"description": "@root",
		"it": "the root context can be looked up via @root",
		"template": "{{@root.foo}}",
		"data": {
			"foo": "hello"
		},
		"expected": "hello",
		"options": {},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 13,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 13,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 11,
						"lastLine": 1,
						"type": "sexpr",
						"hash": null,
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 11,
							"lastLine": 1,
							"type": "DATA",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 11,
								"lastLine": 1,
								"type": "ID",
								"original": "root.foo",
								"parts": [
									"root",
									"foo"
								],
								"string": "root.foo",
								"depth": 0,
								"idName": "root.foo",
								"isSimple": false,
								"stringModeValue": "root.foo"
							},
							"stringModeValue": "root.foo",
							"idName": "@root.foo"
						},
						"params": [],
						"isHelper": false
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 11,
						"lastLine": 1,
						"type": "DATA",
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 11,
							"lastLine": 1,
							"type": "ID",
							"original": "root.foo",
							"parts": [
								"root",
								"foo"
							],
							"string": "root.foo",
							"depth": 0,
							"idName": "root.foo",
							"isSimple": false,
							"stringModeValue": "root.foo"
						},
						"stringModeValue": "root.foo",
						"idName": "@root.foo"
					},
					"params": [],
					"hash": null,
					"isHelper": false
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "lookupData",
					"args": [
						0,
						[
							"root",
							"foo"
						]
					]
				},
				{
					"opcode": "resolvePossibleLambda",
					"args": []
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"isSimple": true
		}
	},
	{
		"description": "@root",
		"it": "the root context can be looked up via @root",
		"template": "{{@root.foo}}",
		"data": {
			"foo": "hello"
		},
		"expected": "hello",
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 13,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 13,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 11,
						"lastLine": 1,
						"type": "sexpr",
						"hash": null,
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 11,
							"lastLine": 1,
							"type": "DATA",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 11,
								"lastLine": 1,
								"type": "ID",
								"original": "root.foo",
								"parts": [
									"root",
									"foo"
								],
								"string": "root.foo",
								"depth": 0,
								"idName": "root.foo",
								"isSimple": false,
								"stringModeValue": "root.foo"
							},
							"stringModeValue": "root.foo",
							"idName": "@root.foo"
						},
						"params": [],
						"isHelper": false
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 11,
						"lastLine": 1,
						"type": "DATA",
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 11,
							"lastLine": 1,
							"type": "ID",
							"original": "root.foo",
							"parts": [
								"root",
								"foo"
							],
							"string": "root.foo",
							"depth": 0,
							"idName": "root.foo",
							"isSimple": false,
							"stringModeValue": "root.foo"
						},
						"stringModeValue": "root.foo",
						"idName": "@root.foo"
					},
					"params": [],
					"hash": null,
					"isHelper": false
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "lookupData",
					"args": [
						0,
						[
							"root",
							"foo"
						]
					]
				},
				{
					"opcode": "resolvePossibleLambda",
					"args": []
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"isSimple": true
		}
	},
	{
		"description": "@root",
		"it": "passed root values take priority",
		"template": "{{@root.foo}}",
		"data": {
			"root": {
				"foo": "hello"
			}
		},
		"expected": "hello",
		"options": {},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 13,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 13,
					"lastLine": 1,
					"type": "mustache",
					"strip": {
						"left": false,
						"right": false
					},
					"escaped": true,
					"sexpr": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 11,
						"lastLine": 1,
						"type": "sexpr",
						"hash": null,
						"id": {
							"firstLine": 1,
							"firstColumn": 2,
							"lastColumn": 11,
							"lastLine": 1,
							"type": "DATA",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 11,
								"lastLine": 1,
								"type": "ID",
								"original": "root.foo",
								"parts": [
									"root",
									"foo"
								],
								"string": "root.foo",
								"depth": 0,
								"idName": "root.foo",
								"isSimple": false,
								"stringModeValue": "root.foo"
							},
							"stringModeValue": "root.foo",
							"idName": "@root.foo"
						},
						"params": [],
						"isHelper": false
					},
					"id": {
						"firstLine": 1,
						"firstColumn": 2,
						"lastColumn": 11,
						"lastLine": 1,
						"type": "DATA",
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 11,
							"lastLine": 1,
							"type": "ID",
							"original": "root.foo",
							"parts": [
								"root",
								"foo"
							],
							"string": "root.foo",
							"depth": 0,
							"idName": "root.foo",
							"isSimple": false,
							"stringModeValue": "root.foo"
						},
						"stringModeValue": "root.foo",
						"idName": "@root.foo"
					},
					"params": [],
					"hash": null,
					"isHelper": false
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "lookupData",
					"args": [
						0,
						[
							"root",
							"foo"
						]
					]
				},
				{
					"opcode": "resolvePossibleLambda",
					"args": []
				},
				{
					"opcode": "appendEscaped",
					"args": []
				}
			],
			"children": [],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"isSimple": true
		}
	},
	{
		"description": "nesting",
		"it": "the root context can be looked up via @root",
		"template": "{{#helper}}{{#helper}}{{@./depth}} {{@../depth}} {{@../../depth}}{{/helper}}{{/helper}}",
		"data": {
			"foo": "hello",
			"depth": 0
		},
		"expected": "2 1 0",
		"options": {},
		"helpers": {
			"helper": {
				"!code": true,
				"javascript": "function (options) {\n            var frame = Handlebars.createFrame(options.data);\n            frame.depth = options.data.depth + 1;\n            return options.fn(this, {data: frame});\n          }",
				"php": "function($options) {\n            $frame = $options['data'];\n            $frame['depth'] = $options['data']['depth'] + 1;\n            return $options->fn($options->scope, array(\"data\" => $frame));\n          }"
			}
		},
		"ast": {
			"firstLine": 1,
			"firstColumn": 0,
			"lastColumn": 87,
			"lastLine": 1,
			"type": "program",
			"statements": [
				{
					"firstLine": 1,
					"firstColumn": 0,
					"lastColumn": 87,
					"lastLine": 1,
					"type": "block",
					"mustache": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 11,
						"lastLine": 1,
						"type": "mustache",
						"strip": {
							"left": false,
							"right": false
						},
						"escaped": true,
						"sexpr": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 9,
							"lastLine": 1,
							"type": "sexpr",
							"id": {
								"firstLine": 1,
								"firstColumn": 3,
								"lastColumn": 9,
								"lastLine": 1,
								"type": "ID",
								"original": "helper",
								"parts": [
									"helper"
								],
								"string": "helper",
								"depth": 0,
								"idName": "helper",
								"isSimple": true,
								"stringModeValue": "helper"
							},
							"params": [],
							"isHelper": false,
							"eligibleHelper": true
						},
						"id": {
							"firstLine": 1,
							"firstColumn": 3,
							"lastColumn": 9,
							"lastLine": 1,
							"type": "ID",
							"original": "helper",
							"parts": [
								"helper"
							],
							"string": "helper",
							"depth": 0,
							"idName": "helper",
							"isSimple": true,
							"stringModeValue": "helper"
						},
						"params": [],
						"eligibleHelper": true,
						"isHelper": false
					},
					"program": {
						"firstLine": 1,
						"firstColumn": 0,
						"lastColumn": 76,
						"lastLine": 1,
						"type": "program",
						"statements": [
							{
								"firstLine": 1,
								"firstColumn": 11,
								"lastColumn": 76,
								"lastLine": 1,
								"type": "block",
								"mustache": {
									"firstLine": 1,
									"firstColumn": 11,
									"lastColumn": 22,
									"lastLine": 1,
									"type": "mustache",
									"strip": {
										"left": false,
										"right": false
									},
									"escaped": true,
									"sexpr": {
										"firstLine": 1,
										"firstColumn": 14,
										"lastColumn": 20,
										"lastLine": 1,
										"type": "sexpr",
										"id": {
											"firstLine": 1,
											"firstColumn": 14,
											"lastColumn": 20,
											"lastLine": 1,
											"type": "ID",
											"original": "helper",
											"parts": [
												"helper"
											],
											"string": "helper",
											"depth": 0,
											"idName": "helper",
											"isSimple": true,
											"stringModeValue": "helper"
										},
										"params": [],
										"isHelper": false,
										"eligibleHelper": true
									},
									"id": {
										"firstLine": 1,
										"firstColumn": 14,
										"lastColumn": 20,
										"lastLine": 1,
										"type": "ID",
										"original": "helper",
										"parts": [
											"helper"
										],
										"string": "helper",
										"depth": 0,
										"idName": "helper",
										"isSimple": true,
										"stringModeValue": "helper"
									},
									"params": [],
									"eligibleHelper": true,
									"isHelper": false
								},
								"program": {
									"firstLine": 1,
									"firstColumn": 11,
									"lastColumn": 65,
									"lastLine": 1,
									"type": "program",
									"statements": [
										{
											"firstLine": 1,
											"firstColumn": 22,
											"lastColumn": 34,
											"lastLine": 1,
											"type": "mustache",
											"strip": {
												"left": false,
												"right": false
											},
											"escaped": true,
											"sexpr": {
												"firstLine": 1,
												"firstColumn": 24,
												"lastColumn": 32,
												"lastLine": 1,
												"type": "sexpr",
												"hash": null,
												"id": {
													"firstLine": 1,
													"firstColumn": 24,
													"lastColumn": 32,
													"lastLine": 1,
													"type": "DATA",
													"id": {
														"firstLine": 1,
														"firstColumn": 25,
														"lastColumn": 32,
														"lastLine": 1,
														"type": "ID",
														"isScoped": true,
														"original": "./depth",
														"parts": [
															"depth"
														],
														"string": "depth",
														"depth": 0,
														"idName": "depth",
														"isSimple": false,
														"stringModeValue": "depth"
													},
													"stringModeValue": "depth",
													"idName": "@depth"
												},
												"params": [],
												"isHelper": false
											},
											"id": {
												"firstLine": 1,
												"firstColumn": 24,
												"lastColumn": 32,
												"lastLine": 1,
												"type": "DATA",
												"id": {
													"firstLine": 1,
													"firstColumn": 25,
													"lastColumn": 32,
													"lastLine": 1,
													"type": "ID",
													"isScoped": true,
													"original": "./depth",
													"parts": [
														"depth"
													],
													"string": "depth",
													"depth": 0,
													"idName": "depth",
													"isSimple": false,
													"stringModeValue": "depth"
												},
												"stringModeValue": "depth",
												"idName": "@depth"
											},
											"params": [],
											"hash": null,
											"isHelper": false
										},
										{
											"firstLine": 1,
											"firstColumn": 34,
											"lastColumn": 35,
											"lastLine": 1,
											"type": "content",
											"string": " ",
											"original": " "
										},
										{
											"firstLine": 1,
											"firstColumn": 35,
											"lastColumn": 48,
											"lastLine": 1,
											"type": "mustache",
											"strip": {
												"left": false,
												"right": false
											},
											"escaped": true,
											"sexpr": {
												"firstLine": 1,
												"firstColumn": 37,
												"lastColumn": 46,
												"lastLine": 1,
												"type": "sexpr",
												"hash": null,
												"id": {
													"firstLine": 1,
													"firstColumn": 37,
													"lastColumn": 46,
													"lastLine": 1,
													"type": "DATA",
													"id": {
														"firstLine": 1,
														"firstColumn": 38,
														"lastColumn": 46,
														"lastLine": 1,
														"type": "ID",
														"original": "../depth",
														"parts": [
															"depth"
														],
														"string": "depth",
														"depth": 1,
														"idName": "../depth",
														"isSimple": false,
														"stringModeValue": "depth"
													},
													"stringModeValue": "depth",
													"idName": "@depth"
												},
												"params": [],
												"isHelper": false
											},
											"id": {
												"firstLine": 1,
												"firstColumn": 37,
												"lastColumn": 46,
												"lastLine": 1,
												"type": "DATA",
												"id": {
													"firstLine": 1,
													"firstColumn": 38,
													"lastColumn": 46,
													"lastLine": 1,
													"type": "ID",
													"original": "../depth",
													"parts": [
														"depth"
													],
													"string": "depth",
													"depth": 1,
													"idName": "../depth",
													"isSimple": false,
													"stringModeValue": "depth"
												},
												"stringModeValue": "depth",
												"idName": "@depth"
											},
											"params": [],
											"hash": null,
											"isHelper": false
										},
										{
											"firstLine": 1,
											"firstColumn": 48,
											"lastColumn": 49,
											"lastLine": 1,
											"type": "content",
											"string": " ",
											"original": " "
										},
										{
											"firstLine": 1,
											"firstColumn": 49,
											"lastColumn": 65,
											"lastLine": 1,
											"type": "mustache",
											"strip": {
												"left": false,
												"right": false
											},
											"escaped": true,
											"sexpr": {
												"firstLine": 1,
												"firstColumn": 51,
												"lastColumn": 63,
												"lastLine": 1,
												"type": "sexpr",
												"hash": null,
												"id": {
													"firstLine": 1,
													"firstColumn": 51,
													"lastColumn": 63,
													"lastLine": 1,
													"type": "DATA",
													"id": {
														"firstLine": 1,
														"firstColumn": 52,
														"lastColumn": 63,
														"lastLine": 1,
														"type": "ID",
														"original": "../../depth",
														"parts": [
															"depth"
														],
														"string": "depth",
														"depth": 2,
														"idName": "../../depth",
														"isSimple": false,
														"stringModeValue": "depth"
													},
													"stringModeValue": "depth",
													"idName": "@depth"
												},
												"params": [],
												"isHelper": false
											},
											"id": {
												"firstLine": 1,
												"firstColumn": 51,
												"lastColumn": 63,
												"lastLine": 1,
												"type": "DATA",
												"id": {
													"firstLine": 1,
													"firstColumn": 52,
													"lastColumn": 63,
													"lastLine": 1,
													"type": "ID",
													"original": "../../depth",
													"parts": [
														"depth"
													],
													"string": "depth",
													"depth": 2,
													"idName": "../../depth",
													"isSimple": false,
													"stringModeValue": "depth"
												},
												"stringModeValue": "depth",
												"idName": "@depth"
											},
											"params": [],
											"hash": null,
											"isHelper": false
										}
									],
									"strip": {}
								},
								"strip": {
									"left": false,
									"right": false
								}
							}
						],
						"strip": {}
					},
					"strip": {
						"left": false,
						"right": false
					}
				}
			],
			"strip": {}
		},
		"opcodes": {
			"opcodes": [
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "getContext",
					"args": [
						0
					]
				},
				{
					"opcode": "lookupOnContext",
					"args": [
						[
							"helper"
						],
						null,
						null
					]
				},
				{
					"opcode": "invokeAmbiguous",
					"args": [
						"helper",
						true
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						0
					]
				},
				{
					"opcode": "pushProgram",
					"args": [
						null
					]
				},
				{
					"opcode": "emptyHash",
					"args": []
				},
				{
					"opcode": "ambiguousBlockValue",
					"args": []
				},
				{
					"opcode": "append",
					"args": []
				}
			],
			"children": [
				{
					"opcodes": [
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								0
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "getContext",
							"args": [
								0
							]
						},
						{
							"opcode": "lookupOnContext",
							"args": [
								[
									"helper"
								],
								null,
								null
							]
						},
						{
							"opcode": "invokeAmbiguous",
							"args": [
								"helper",
								true
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								0
							]
						},
						{
							"opcode": "pushProgram",
							"args": [
								null
							]
						},
						{
							"opcode": "emptyHash",
							"args": []
						},
						{
							"opcode": "ambiguousBlockValue",
							"args": []
						},
						{
							"opcode": "append",
							"args": []
						}
					],
					"children": [
						{
							"opcodes": [
								{
									"opcode": "lookupData",
									"args": [
										0,
										[
											"depth"
										]
									]
								},
								{
									"opcode": "resolvePossibleLambda",
									"args": []
								},
								{
									"opcode": "appendEscaped",
									"args": []
								},
								{
									"opcode": "appendContent",
									"args": [
										" "
									]
								},
								{
									"opcode": "lookupData",
									"args": [
										1,
										[
											"depth"
										]
									]
								},
								{
									"opcode": "resolvePossibleLambda",
									"args": []
								},
								{
									"opcode": "appendEscaped",
									"args": []
								},
								{
									"opcode": "appendContent",
									"args": [
										" "
									]
								},
								{
									"opcode": "lookupData",
									"args": [
										2,
										[
											"depth"
										]
									]
								},
								{
									"opcode": "resolvePossibleLambda",
									"args": []
								},
								{
									"opcode": "appendEscaped",
									"args": []
								}
							],
							"children": [],
							"depths": {
								"list": []
							},
							"options": {
								"data": true,
								"knownHelpers": {
									"helperMissing": true,
									"blockHelperMissing": true,
									"each": true,
									"if": true,
									"unless": true,
									"with": true,
									"log": true,
									"lookup": true
								}
							},
							"isSimple": false
						}
					],
					"depths": {
						"list": []
					},
					"options": {
						"data": true,
						"knownHelpers": {
							"helperMissing": true,
							"blockHelperMissing": true,
							"each": true,
							"if": true,
							"unless": true,
							"with": true,
							"log": true,
							"lookup": true
						}
					},
					"guid": 1,
					"isSimple": true
				}
			],
			"depths": {
				"list": []
			},
			"options": {
				"data": true,
				"knownHelpers": {
					"helperMissing": true,
					"blockHelperMissing": true,
					"each": true,
					"if": true,
					"unless": true,
					"with": true,
					"log": true,
					"lookup": true
				}
			},
			"guid": 1,
			"isSimple": true
		}
	}
]